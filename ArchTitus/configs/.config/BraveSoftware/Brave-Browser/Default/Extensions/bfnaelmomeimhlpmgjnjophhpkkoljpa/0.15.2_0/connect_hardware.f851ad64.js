!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},a=n.parcelRequirea886;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,n){r[e]=n},n.parcelRequirea886=a);var o=a("cuInp"),i=a("1vgyn"),c=a("yrqZm"),l=a("jLXMA"),u=a("5BN27"),d=a("8lwbT"),s=a("1XFga"),p=a("foMWJ"),f=a("k4gOl"),m=a("226dB"),g=a("8fnAG");a("goCP2");var v=a("eNGT7"),h=a("hZbar"),y=(m=a("226dB"),a("5vcFJ")),x=a("edC09"),T=a("fVAzy"),S=a("15Pgw"),E=a("jIDTl"),w=a("jcs3P"),b=a("6HRK6"),A=a("4gTGP"),P=a("9lBKv"),H=a("eylRN"),C=a("bbVVl"),L=a("6AaHU"),I=a("aq3jz"),k=a("3u496"),B=a("3l6Qh"),F=a("f39Wy"),O=a("5oDS0"),D=(o=a("cuInp"),c=a("yrqZm"),u=a("5BN27"),E=a("jIDTl"),a("dErWb")),N=a("2Af4W"),W=(k=a("3u496"),a("11rv6"));function j(){var e=o.taggedTemplateLiteral(["\n  background-color: #222222;\n  padding: 10px 16px;\n  border-bottom: 1px solid #323232;\n  height: 46px;\n  opacity: ",";\n  position: absolute;\n"]);return j=function(){return e},e}function R(){var e=o.taggedTemplateLiteral(["\n  display: flex;\n  margin-left: 10px;\n  > * {\n    margin-right: 10px;\n  }\n"]);return R=function(){return e},e}function _(){var e=o.taggedTemplateLiteral(["\n  width: 24px;\n  height: 24px;\n"]);return _=function(){return e},e}var M=function(e){return e},V=u.default(W.Row).attrs({justify:"space-between"})(ee||(ee=M(j(),0)),(function(e){var n;return null!==(n=e.opacity)&&void 0!==n?n:"1"})),q=u.default.div(ne||(ne=M(R()))),K=u.default.div(te||(te=M(_()))),Z=function(n){var t=n.onBackClick,r=n.totalSteps,a=n.currentStepIndex,o=n.isHidden,i=n.showBackButtonOnFirstStep||0!==a;return e(c).createElement(V,{opacity:o?0:1},i?e(c).createElement(D.ChevronCircle,{right:1,onClick:t},e(c).createElement(k.LeftChevronIcon,null)):e(c).createElement(K,null),e(c).createElement(q,null,E.range(r).map((function(n){var t=n<=a?"#4E44CE":"#333";return e(c).createElement(N.Circle,{key:n,diameter:12,color:t})}))),e(c).createElement(K,null))},U=a("glMqZ"),G=(o=a("cuInp"),c=a("yrqZm"),u=a("5BN27"),a("juw1O")),z=(k=a("3u496"),a("i0uZH"));function j(){var e=o.taggedTemplateLiteral(["\n  position: relative;\n  width: 100%;\n"]);return j=function(){return e},e}function R(){var e=o.taggedTemplateLiteral(["\n  width: 11px;\n  margin-top: 1px;\n  margin-right: 8px;\n  svg {\n    fill: #aaa;\n  }\n"]);return R=function(){return e},e}M=function(e){return e};var J=u.default(G.ListboxInput)(ee||(ee=M(j()))),X=u.default.div(ne||(ne=M(R()))),Q=function(n){var t,r=n.value,a=n.placeholderText,o=n.options,i=n.onChange,l=o.map((function(e){return e.value})),u=0===o.length,d=null===(t=o.find((function(e){return e.value===r})))||void 0===t?void 0:t.displayValue;return e(c).createElement(J,{value:null!=r?r:"__none",onChange:function(e){return i(e,l.indexOf(e))},tabIndex:0,disabled:u},(function(){return e(c).createElement(e(c).Fragment,null,e(c).createElement(z.SelectButton,{arrow:e(c).createElement(X,null,e(c).createElement(k.DownChevronIcon,null))},void 0===r?a:d),!u&&e(c).createElement(z.SelectPopover,null,e(c).createElement(z.SelectList,null,o.map((function(n){var t;return e(c).createElement(z.SelectItem,{key:n.value,value:n.value},null!==(t=n.displayValue)&&void 0!==t?t:n.value)})))))}))};function j(){var e=o.taggedTemplateLiteral(["\n  width: 400px;\n  height: 450px;\n  background-color: #222222;\n  border: 1px solid #323232;\n  box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.3);\n  border-radius: 8px;\n  position: relative;\n  overflow: hidden;\n"]);return j=function(){return e},e}function R(){var e=o.taggedTemplateLiteral(["\n  > * {\n    margin-bottom: 10px;\n  }\n  margin-top: 27px;\n"]);return R=function(){return e},e}function _(){var e=o.taggedTemplateLiteral(["\n  margin-top: 46px;\n  padding-left: 10px;\n  padding-right: 10px;\n"]);return _=function(){return e},e}function Y(){var e=o.taggedTemplateLiteral(["\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  label {\n    color: #999;\n  }\n"]);return Y=function(){return e},e}function $(){var e=o.taggedTemplateLiteral(["\n  padding: 20px;\n  padding-top: 46px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n"]);return $=function(){return e},e}M=function(e){return e};var ee,ne,te,re,ae,oe=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))};x.initSentry();var ie=u.default.main(ee||(ee=M(j()))),ce=u.default.section(ne||(ne=M(R()))),le=u.default(O.IconHeader)(te||(te=M(_()))),ue=u.default.div(re||(re=M(Y()))),de=function(){var n=new URLSearchParams(f.useLocation().search).get("permission");return e(c).createElement(e(c).Fragment,null,e(c).createElement(S.ThemedGlobalStyle,{backgroundColor:"#2C2D30"}),e(c).createElement(B.FullPageHeader,null),e(c).createElement(P.HardwareWalletProvider,null,e(c).createElement(I.OnboardingAndConnectHardwareErrorBoundary,null,n?e(c).createElement(ie,null,e(c).createElement(fe,{onFinish:function(){return window.close()},pushStep:h.NOOP,popStep:h.NOOP})):e(c).createElement(se,null))))},se=function(){var n=o.slicedToArray(c.useState([]),2),t=n[0],r=n[1],a=p.usePreviousDistinct(t,(function(e,n){return(null==e?void 0:e.length)===n.length})),i=E.getLast(t),l=function(e){r((function(n){return d.default(n,(function(n){n.push(e)}))}))},u=function(){r((function(e){return d.default(e,(function(e){e.pop()}))}))};c.useEffect((function(){r([e(c).createElement(fe,{pushStep:l,popStep:u})])}),[]);var f=t.length,m=t.length>(null!=a?a:[]).length,g=0===(null==a?void 0:a.length),v={initial:{x:g?0:m?150:-150,opacity:g?1:0},animate:{x:0,opacity:1},exit:{opacity:0},transition:{duration:.2}};return e(c).createElement(ie,null,e(c).createElement(Z,{totalSteps:3,onBackClick:u,currentStepIndex:f-1}),e(c).createElement(s.AnimatePresence,{exitBeforeEnter:!0},e(c).createElement(s.motion.div,Object.assign({style:{height:"100%"},key:"".concat(t.length,"_").concat(null==a?void 0:a.length)},v),i)))},pe=u.default.div(ae||(ae=M($()))),fe=function(n){var t,r,a=v.useTranslation().t,o=P.useLedgerTransport(),i=o.ledgerTransportState,l=o.transport,u=o.getPermission,d=F.ConfirmationIconType.Default,s=e(c).createElement(U.SpinnerIcon,null),p=a("connectHardwareContinueActionButtonText"),f=!1,m=h.NOOP;switch(i){case P.LedgerTransportState.Searching:t=a("connectHardwareSearchingPrimaryText"),r=a("connectHardwareSearchingSecondaryText"),f=!0;break;case P.LedgerTransportState.NeedsPermission:s=e(c).createElement(k.AddIcon,null),t=a("connectHardwareNeedsPermissionPrimaryText"),r=a("connectHardwareNeedsPermissionSecondaryText"),m=u;break;case P.LedgerTransportState.WaitingForPermission:t=a("connectHardwareWaitingForPermissionPrimaryText"),r=a("connectHardwareWaitingForPermissionSecondaryText"),f=!0;break;case P.LedgerTransportState.WaitingForApplication:s=e(c).createElement(k.SolanaIcon,null),t=a("connectHardwareWaitingForApplicationPrimaryText"),r=a("connectHardwareWaitingForApplicationSecondaryText"),f=!0;break;case P.LedgerTransportState.Connected:d=F.ConfirmationIconType.Success,t=a("connectHardwareConnectedPrimaryText"),r=a("connectHardwareConnectedSecondaryText"),m=function(){if(!l)throw new Error("Transport is missing");n.onFinish?n.onFinish():n.pushStep(e(c).createElement(ge,Object.assign({transport:l},n)))};break;case P.LedgerTransportState.Failed:d=F.ConfirmationIconType.Failure,t=a("connectHardwareFailedPrimaryText"),r=a("connectHardwareFailedSecondaryText"),p=a("connectHardwareFailedRetryActionButtonText"),m=u}return e(c).createElement(pe,null,e(c).createElement(le,{icon:e(c).createElement(F.ConfirmationIcon,{defaultIcon:s,type:d}),primaryText:t,secondaryText:r,headerStyle:O.IconHeaderStyle.Large}),e(c).createElement(L.Button,{onClick:m,theme:"primary",disabled:f},p))},me=[m.DerivationPathType.Bip44Root,m.DerivationPathType.Bip44,m.DerivationPathType.Bip44Change],ge=function(n){var t=v.useTranslation().t,r=o.slicedToArray(c.useState(0),2),a=r[0],l=r[1],u=o.slicedToArray(c.useState(void 0),2),s=u[0],p=u[1],f=o.slicedToArray(c.useState([]),2),x=f[0],S=f[1],P=o.slicedToArray(c.useState({}),2),C=P[0],I=P[1],B=o.slicedToArray(c.useState(!1),2),F=B[0],D=B[1],N=H.useConnection(),W=o.slicedToArray(y.useStorage(m.StorageKeys.AccountMetas,[]),3),j=W[0],R=W[1],_=W[2],M=c.useMemo((function(){var e=j.filter((function(e){return e.type===m.AccountType.Ledger})).map((function(e){return e.publicKey.toString()}));return x.filter((function(n){return!e.includes(n.toString())}))}),[x,j]),V=void 0!==a?me[a]:void 0,q=c.useMemo((function(){return V?V===m.DerivationPathType.Bip44Root?[b.solanaDerivationPath(0,0,m.DerivationPathType.Bip44Root)]:E.range(10).map((function(e){return b.solanaDerivationPath(e,0,V)})):[]}),[a]),K=me.map((function(e){return{value:e,displayValue:h.DERIVATION_PATH_TYPE_TO_VALUE[e]}}));c.useEffect((function(){oe(void 0,void 0,void 0,e(i).mark((function t(){var r,a,o,c,l,u,d,s,p;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R){e.next=2;break}return e.abrupt("return");case 2:D(!0),e.prev=3,r=[],a=!0,o=!1,c=void 0,e.prev=6,l=q[Symbol.iterator]();case 8:if(a=(u=l.next()).done){e.next=17;break}return d=u.value,e.next=12,b.getPublicKeyAsync(n.transport,d);case 12:s=e.sent,r.push(s);case 14:a=!0,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),o=!0,c=e.t0;case 23:e.prev=23,e.prev=24,a||null==l.return||l.return();case 26:if(e.prev=26,!o){e.next=29;break}throw c;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return S(r),e.next=34,A.getMultipleAccountsAsync(N,r,"finalized");case 34:p=e.sent,I(p),e.next=41;break;case 38:e.prev=38,e.t1=e.catch(3),console.error(e.t1);case 41:return e.prev=41,D(!1),e.finish(41);case 44:case"end":return e.stop()}}),t,null,[[3,38,41,44],[6,19,23,31],[24,,26,30]])})))}),[n.transport,R,q,N]),c.useEffect((function(){S([])}),[q]),c.useEffect((function(){1===M.length&&p(0)}),[M]);var Z=M.map((function(n){var t,r=n.toString(),a=null===(t=C[n.toString()])||void 0===t?void 0:t.lamports,o=void 0!==a?w.formatTokenAmount(w.lamportsToSolana(a)):"0";return{displayValue:e(c).createElement(ue,null,e(c).createElement("span",null,w.formatHashMedium(r,7)),e(c).createElement("label",null,o," SOL")),value:r}})),U=void 0===a||void 0===s,G=void 0!==s?M[s]:void 0;return e(c).createElement(pe,null,e(c).createElement(le,{icon:e(c).createElement(k.AddIcon,null),primaryText:t("connectHardwareSelectAddressSelectWalletAddress"),headerStyle:O.IconHeaderStyle.Large}),e(c).createElement(ce,null,e(c).createElement(Q,{placeholderText:t("connectHardwareSelectAddressDerivationPath"),options:K,value:V,onChange:function(e,n){l(n)}}),e(c).createElement(Q,{placeholderText:F?t("connectHardwareSelectAddressSearching"):0===M.length?t("connectHardwareSelectAddressAllAddressesImported"):t("connectHardwareSelectAddressWalletAddress"),options:Z,value:null==G?void 0:G.toString(),onChange:function(e,n){p(n)}})),e(c).createElement(L.Button,{onClick:function(){if(void 0!==s){var t,r,a=M[s],o=x.map((function(e){return e.toString()})).indexOf(a.toString());t=a.toString(),r=o,oe(void 0,void 0,void 0,e(i).mark((function n(){var a,o;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R){e.next=2;break}return e.abrupt("return");case 2:a=d.default(j,(function(e){var n=e.filter((function(e){return e.type===m.AccountType.Ledger})).length+1,a=q[r].toString("hex");e.push({type:m.AccountType.Ledger,name:"Ledger ".concat(n),publicKey:t,derivationPath:a})})),o=a.length-1,T.analytics.capture("connectHardwareAddAccount"),_(a),g.setStorageValue(m.StorageKeys.SelectedAccountIndex,o);case 7:case"end":return e.stop()}}),n)}))),n.pushStep(e(c).createElement(ve,Object.assign({},n)))}},theme:"primary",disabled:U},"Add Account"))},ve=function(){var n=v.useTranslation().t;return e(c).createElement(pe,null,e(c).createElement(le,{icon:e(c).createElement(F.ConfirmationIcon,{defaultIcon:e(c).createElement("div",null),type:F.ConfirmationIconType.Success}),primaryText:n("connectHardwareFinishPrimaryText"),secondaryText:n("connectHardwareFinishSecondaryText"),headerStyle:O.IconHeaderStyle.Large}),e(c).createElement(L.Button,{onClick:function(){T.analytics.capture("connectHardwareFinishClick"),window.close()},theme:"primary"},"Done"))};l.render(e(c).createElement(f.BrowserRouter,null,e(c).createElement(C.BannerProvider,null,e(c).createElement(H.ConnectionProvider,null,e(c).createElement(de,null)))),document.getElementById("root")),T.analytics.capture("connectHardwareOpen")}();