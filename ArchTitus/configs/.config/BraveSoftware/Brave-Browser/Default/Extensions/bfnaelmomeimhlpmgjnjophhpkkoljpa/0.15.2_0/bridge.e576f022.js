var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function t(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function r(e){return e&&e.__esModule?e.default:e}var n={},i={},o=e.parcelRequirea886;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){i[e]=t},e.parcelRequirea886=o),o.register("9aN3i",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});var n=o("hRd2x");const i=r(o("iQIaZ")),a=r(o("5JYj0"));var s=o("g8BKq");const c=r(o("f2EzX"));class u extends c.default{sendAsync(e,t){this._rpcRequest(e,t)}addListener(e,t){return this._warnOfDeprecation(e),super.addListener(e,t)}on(e,t){return this._warnOfDeprecation(e),super.on(e,t)}once(e,t){return this._warnOfDeprecation(e),super.once(e,t)}prependListener(e,t){return this._warnOfDeprecation(e),super.prependListener(e,t)}prependOnceListener(e,t){return this._warnOfDeprecation(e),super.prependOnceListener(e,t)}_handleDisconnect(e,t){super._handleDisconnect(e,t),this.networkVersion&&!e&&(this.networkVersion=null)}_warnOfDeprecation(e){var t;!1===(null===(t=this._sentWarnings)||void 0===t?void 0:t.events[e])&&(this._log.warn(a.default.warnings.events[e]),this._sentWarnings.events[e]=!0)}enable(){return this._sentWarnings.enable||(this._log.warn(a.default.warnings.enableDeprecation),this._sentWarnings.enable=!0),new Promise(((e,t)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},s.getRpcPromiseCallback(e,t))}catch(e){t(e)}}))}send(e,t){return this._sentWarnings.send||(this._log.warn(a.default.warnings.sendDeprecation),this._sentWarnings.send=!0),"string"!=typeof e||t&&!Array.isArray(t)?e&&"object"==typeof e&&"function"==typeof t?this._rpcRequest(e,t):this._sendSync(e):new Promise(((r,n)=>{try{this._rpcRequest({method:e,params:t},s.getRpcPromiseCallback(r,n,!1))}catch(e){n(e)}}))}_sendSync(e){let t;switch(e.method){case"eth_accounts":t=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":t=this.selectedAddress||null;break;case"eth_uninstallFilter":this._rpcRequest(e,s.NOOP),t=!0;break;case"net_version":t=this.networkVersion||null;break;default:throw new Error(a.default.errors.unsupportedSync(e.method))}return{id:e.id,jsonrpc:e.jsonrpc,result:t}}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise((e=>{this.on("_initialized",(()=>e()))})),this._state.isUnlocked),requestBatch:async e=>{if(!Array.isArray(e))throw n.ethErrors.rpc.invalidRequest({message:"Batch requests must be made with an array of request objects.",data:e});return new Promise(((t,r)=>{this._rpcRequest(e,s.getRpcPromiseCallback(t,r))}))}},{get:(e,t,...r)=>(this._sentWarnings.experimentalMethods||(this._log.warn(a.default.warnings.experimentalMethods),this._sentWarnings.experimentalMethods=!0),Reflect.get(e,t,...r))})}constructor(e,{jsonRpcStreamName:t="metamask-provider",logger:r=console,maxEventListeners:n=100,shouldSendMetadata:o=!0}={}){if(super(e,{jsonRpcStreamName:t,logger:r,maxEventListeners:n}),this._sentWarnings={enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},this.networkVersion=null,this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",(e=>{const{method:t}=e;s.EMITTED_NOTIFICATIONS.includes(t)&&(this.emit("data",e),this.emit("notification",e.params.result))})),o)if("complete"===document.readyState)i.default(this._rpcEngine,this._log);else{const e=()=>{i.default(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",e)};window.addEventListener("DOMContentLoaded",e)}}}e.exports.default=u})),o.register("hRd2x",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getMessageFromCode=e.exports.serializeError=e.exports.EthereumProviderError=e.exports.EthereumRpcError=e.exports.ethErrors=e.exports.errorCodes=void 0;var r=o("hjikV");Object.defineProperty(e.exports,"EthereumRpcError",{enumerable:!0,get:function(){return r.EthereumRpcError}}),Object.defineProperty(e.exports,"EthereumProviderError",{enumerable:!0,get:function(){return r.EthereumProviderError}});var n=o("kOKb5");Object.defineProperty(e.exports,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(e.exports,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});var i=o("iT0xr");Object.defineProperty(e.exports,"ethErrors",{enumerable:!0,get:function(){return i.ethErrors}});var a=o("lv8zX");Object.defineProperty(e.exports,"errorCodes",{enumerable:!0,get:function(){return a.errorCodes}})})),o.register("hjikV",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.EthereumProviderError=e.exports.EthereumRpcError=void 0;var r=o("amxT1");class n extends Error{serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return r.default(this.serialize(),i,2)}constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}}e.exports.EthereumRpcError=n;function i(e,t){if("[Circular]"!==t)return t}e.exports.EthereumProviderError=class extends n{constructor(e,t,r){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}})),o.register("amxT1",(function(e,t){e.exports=s,s.default=s,s.stable=d,s.stableStringify=d;var r="[...]",n="[Circular]",i=[],o=[];function a(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function s(e,t,r,n){var s;void 0===n&&(n=a()),u(e,"",0,[],void 0,0,n);try{s=0===o.length?JSON.stringify(e,t,r):JSON.stringify(e,f(t),r)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==i.length;){var c=i.pop();4===c.length?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return s}function c(e,t,r,n){var a=Object.getOwnPropertyDescriptor(n,r);void 0!==a.get?a.configurable?(Object.defineProperty(n,r,{value:e}),i.push([n,r,t,a])):o.push([t,r,e]):(n[r]=e,i.push([n,r,t]))}function u(e,t,i,o,a,s,l){var d;if(s+=1,"object"==typeof e&&null!==e){for(d=0;d<o.length;d++)if(o[d]===e)return void c(n,e,t,a);if(void 0!==l.depthLimit&&s>l.depthLimit)return void c(r,e,t,a);if(void 0!==l.edgesLimit&&i+1>l.edgesLimit)return void c(r,e,t,a);if(o.push(e),Array.isArray(e))for(d=0;d<e.length;d++)u(e[d],d,d,o,e,s,l);else{var h=Object.keys(e);for(d=0;d<h.length;d++){var f=h[d];u(e[f],f,d,o,e,s,l)}}o.pop()}}function l(e,t){return e<t?-1:e>t?1:0}function d(e,t,r,n){void 0===n&&(n=a());var s,c=h(e,"",0,[],void 0,0,n)||e;try{s=0===o.length?JSON.stringify(c,t,r):JSON.stringify(c,f(t),r)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==i.length;){var u=i.pop();4===u.length?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}}return s}function h(e,t,o,a,s,u,d){var f;if(u+=1,"object"==typeof e&&null!==e){for(f=0;f<a.length;f++)if(a[f]===e)return void c(n,e,t,s);try{if("function"==typeof e.toJSON)return}catch(e){return}if(void 0!==d.depthLimit&&u>d.depthLimit)return void c(r,e,t,s);if(void 0!==d.edgesLimit&&o+1>d.edgesLimit)return void c(r,e,t,s);if(a.push(e),Array.isArray(e))for(f=0;f<e.length;f++)h(e[f],f,f,a,e,u,d);else{var p={},m=Object.keys(e).sort(l);for(f=0;f<m.length;f++){var g=m[f];h(e[g],g,f,a,e,u,d),p[g]=e[g]}if(void 0===s)return p;i.push([s,t,e]),s[t]=p}a.pop()}}function f(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(o.length>0)for(var n=0;n<o.length;n++){var i=o[n];if(i[1]===t&&i[0]===r){r=i[2],o.splice(n,1);break}}return e.call(this,t,r)}}})),o.register("kOKb5",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.serializeError=e.exports.isValidCode=e.exports.getMessageFromCode=e.exports.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;var r=o("lv8zX"),n=o("hjikV");const i=r.errorCodes.rpc.internal,a={code:i,message:s(i)};function s(t,n="Unspecified error message. This is a bug, please report it."){if(Number.isInteger(t)){const n=t.toString();if(d(r.errorValues,n))return r.errorValues[n].message;if(u(t))return e.exports.JSON_RPC_SERVER_ERROR_MESSAGE}return n}function c(e){if(!Number.isInteger(e))return!1;const t=e.toString();return!!r.errorValues[t]||!!u(e)}function u(e){return e>=-32099&&e<=-32e3}function l(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",e.exports.getMessageFromCode=s,e.exports.isValidCode=c,e.exports.serializeError=function(e,{fallbackError:t=a,shouldIncludeStack:r=!1}={}){var i,o;if(!t||!Number.isInteger(t.code)||"string"!=typeof t.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof n.EthereumRpcError)return e.serialize();const u={};if(e&&"object"==typeof e&&!Array.isArray(e)&&d(e,"code")&&c(e.code)){const t=e;u.code=t.code,t.message&&"string"==typeof t.message?(u.message=t.message,d(t,"data")&&(u.data=t.data)):(u.message=s(u.code),u.data={originalError:l(e)})}else{u.code=t.code;const r=null===(i=e)||void 0===i?void 0:i.message;u.message=r&&"string"==typeof r?r:t.message,u.data={originalError:l(e)}}const h=null===(o=e)||void 0===o?void 0:o.stack;return r&&e&&h&&"string"==typeof h&&(u.stack=h),u}})),o.register("lv8zX",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.errorValues=e.exports.errorCodes=void 0,e.exports.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},e.exports.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}})),o.register("iT0xr",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ethErrors=void 0;var r=o("hjikV"),n=o("kOKb5"),i=o("lv8zX");function a(e,t){const[i,o]=c(t);return new r.EthereumRpcError(e,i||n.getMessageFromCode(e),o)}function s(e,t){const[i,o]=c(t);return new r.EthereumProviderError(e,i||n.getMessageFromCode(e),o)}function c(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}e.exports.ethErrors={rpc:{parse:e=>a(i.errorCodes.rpc.parse,e),invalidRequest:e=>a(i.errorCodes.rpc.invalidRequest,e),invalidParams:e=>a(i.errorCodes.rpc.invalidParams,e),methodNotFound:e=>a(i.errorCodes.rpc.methodNotFound,e),internal:e=>a(i.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return a(t,e)},invalidInput:e=>a(i.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>a(i.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>a(i.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>a(i.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>a(i.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>a(i.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>s(i.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>s(i.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>s(i.errorCodes.provider.unsupportedMethod,e),disconnected:e=>s(i.errorCodes.provider.disconnected,e),chainDisconnected:e=>s(i.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:n,data:i}=e;if(!n||"string"!=typeof n)throw new Error('"message" must be a nonempty string');return new r.EthereumProviderError(t,n,i)}}}})),o.register("iQIaZ",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const n=r(o("5JYj0"));var i=o("g8BKq");function a(e){const{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=t.querySelector('head > meta[name="title"]');return n?n.content:t.title&&t.title.length>0?t.title:window.location.hostname}async function s(e){const{document:t}=e,r=t.querySelectorAll('head > link[rel~="icon"]');for(const e of r)if(e&&await c(e.href))return e.href;return null}function c(e){return new Promise(((t,r)=>{try{const r=document.createElement("img");r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}catch(e){r(e)}}))}e.exports.default=async function(e,t){try{const t=await async function(){return{name:a(window),icon:await s(window)}}();e.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:t},i.NOOP)}catch(e){t.error({message:n.default.errors.sendSiteMetadata(),originalError:e})}}})),o.register("5JYj0",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});const r={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:e=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`MetaMask: Connected to chain with ID "${e}".`},warnings:{enableDeprecation:"MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1102",sendDeprecation:"MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193",events:{close:"MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect",data:"MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message",networkChanged:"MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged",notification:"MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message"},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}};e.exports.default=r})),o.register("g8BKq",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.EMITTED_NOTIFICATIONS=e.exports.NOOP=e.exports.logStreamDisconnectWarning=e.exports.getRpcPromiseCallback=e.exports.createErrorMiddleware=void 0;var r=o("hRd2x");e.exports.createErrorMiddleware=function(e){return(t,n,i)=>{"string"==typeof t.method&&t.method||(n.error=r.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:t})),i((t=>{const{error:r}=n;return r?(e.error(`MetaMask - RPC Error: ${r.message}`,r),t()):t()}))}};e.exports.getRpcPromiseCallback=(e,t,r=!0)=>(n,i)=>{n||i.error?t(n||i.error):!r||Array.isArray(i)?e(i):e(i.result)},e.exports.logStreamDisconnectWarning=function(e,t,r,n){let i=`MetaMask: Lost connection to "${t}".`;(null==r?void 0:r.stack)&&(i+=`\n${r.stack}`),e.warn(i),n&&n.listenerCount("error")>0&&n.emit("error",i)};e.exports.NOOP=()=>{},e.exports.EMITTED_NOTIFICATIONS=["eth_subscription"]})),o.register("f2EzX",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const n=r(o("jDbgs"));var i=o("29wSp"),a=o("2tjzR");const s=r(o("2aDws")),c=r(o("2pniZ")),u=r(o("9EUTU"));var l=o("hRd2x"),d=o("hlRJ1");const h=r(o("5JYj0"));var f=o("g8BKq");class p extends c.default{isConnected(){return this._state.isConnected}async request(e){if(!e||"object"!=typeof e||Array.isArray(e))throw l.ethErrors.rpc.invalidRequest({message:h.default.errors.invalidRequestArgs(),data:e});const{method:t,params:r}=e;if("string"!=typeof t||0===t.length)throw l.ethErrors.rpc.invalidRequest({message:h.default.errors.invalidRequestMethod(),data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r))throw l.ethErrors.rpc.invalidRequest({message:h.default.errors.invalidRequestParams(),data:e});return new Promise(((e,n)=>{this._rpcRequest({method:t,params:r},f.getRpcPromiseCallback(e,n))}))}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:r,networkVersion:n}=await this.request({method:"metamask_getProviderState"});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t,networkVersion:n}),this._handleUnlockStateChanged({accounts:e,isUnlocked:r}),this._handleAccountsChanged(e)}catch(e){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",e)}finally{this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let r=t;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),"eth_accounts"!==e.method&&"eth_requestAccounts"!==e.method||(r=(r,n)=>{this._handleAccountsChanged(n.result||[],"eth_accounts"===e.method),t(r,n)})),this._rpcEngine.handle(e,r)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(h.default.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new l.EthereumRpcError(1013,t||h.default.errors.disconnected()),this._log.debug(r)):(r=new l.EthereumRpcError(1011,t||h.default.errors.permanentlyDisconnected()),this._log.error(r),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleStreamDisconnect(e,t){f.logStreamDisconnectWarning(this._log,e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}_handleChainChanged({chainId:e,networkVersion:t}={}){e&&"string"==typeof e&&e.startsWith("0x")&&t&&"string"==typeof t?"loading"===t?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId))):this._log.error("MetaMask: Received invalid network parameters. Please report this bug.",{chainId:e,networkVersion:t})}_handleAccountsChanged(e,t=!1){let r=e;Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),r=[]);for(const t of e)if("string"!=typeof t){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),r=[];break}u.default(this._state.accounts,r)||(t&&null!==this._state.accounts&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",r),this._state.accounts=r,this.selectedAddress!==r[0]&&(this.selectedAddress=r[0]||null),this._state.initialized&&this.emit("accountsChanged",r))}_handleUnlockStateChanged({accounts:e,isUnlocked:t}={}){"boolean"==typeof t?t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}constructor(e,{jsonRpcStreamName:t="metamask-provider",logger:r=console,maxEventListeners:o=100}={}){if(super(),!d.duplex(e))throw new Error(h.default.errors.invalidDuplexStream());this._log=r,this.setMaxListeners(o),this._state=Object.assign({},p._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this);const c=new s.default;n.default(e,c,e,this._handleStreamDisconnect.bind(this,"MetaMask")),this.on("connect",(()=>{this._state.isConnected=!0})),this._jsonRpcConnection=a.createStreamMiddleware(),n.default(this._jsonRpcConnection.stream,c.createStream(t),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider"));const u=new i.JsonRpcEngine;u.push(i.createIdRemapMiddleware()),u.push(f.createErrorMiddleware(this._log)),u.push(this._jsonRpcConnection.middleware),this._rpcEngine=u,this._initializeState(),this._jsonRpcConnection.events.on("notification",(t=>{const{method:r,params:n}=t;"metamask_accountsChanged"===r?this._handleAccountsChanged(n):"metamask_unlockStateChanged"===r?this._handleUnlockStateChanged(n):"metamask_chainChanged"===r?this._handleChainChanged(n):f.EMITTED_NOTIFICATIONS.includes(r)?this.emit("message",{type:r,data:n}):"METAMASK_STREAM_FAILURE"===r&&e.destroy(new Error(h.default.errors.permanentlyDisconnected()))}))}}e.exports.default=p,p._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1}})),o.register("jDbgs",(function(e,t){var r=o("itqHj"),n=o("5rrjE"),i=o("6pXAD"),a=o("iegPd"),s=function(){},c=/^v?\.0/.test(r.version),u=function(e){return"function"==typeof e},l=function(e,t,r,o){o=n(o);var l=!1;e.on("close",(function(){l=!0})),i(e,{readable:t,writable:r},(function(e){if(e)return o(e);l=!0,o()}));var d=!1;return function(t){if(!l&&!d)return d=!0,function(e){return!!c&&!!a&&(e instanceof(a.ReadStream||s)||e instanceof(a.WriteStream||s))&&u(e.close)}(e)?e.close(s):function(e){return e.setHeader&&u(e.abort)}(e)?e.abort():u(e.destroy)?e.destroy():void o(t||new Error("stream was destroyed"))}},d=function(e){e()},h=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=u(t[t.length-1]||s)&&t.pop()||s;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map((function(i,o){var a=o<t.length-1;return l(i,a,o>0,(function(t){e||(e=t),t&&n.forEach(d),a||(n.forEach(d),r(e))}))}));return t.reduce(h)}})),o.register("5rrjE",(function(e,t){var r=o("iY3ce");function n(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function i(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=r(n),e.exports.strict=r(i),n.proto=n((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})}))})),o.register("iY3ce",(function(e,t){e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),i=e[e.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach((function(e){n[e]=i[e]})),n}return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}})),o.register("6pXAD",(function(e,t){var r=o("itqHj"),n=o("5rrjE"),i=function(){},a=function(e,t,o){if("function"==typeof t)return a(e,null,t);t||(t={}),o=n(o||i);var s=e._writableState,c=e._readableState,u=t.readable||!1!==t.readable&&e.readable,l=t.writable||!1!==t.writable&&e.writable,d=!1,h=function(){e.writable||f()},f=function(){l=!1,u||o.call(e)},p=function(){u=!1,l||o.call(e)},m=function(t){o.call(e,t?new Error("exited with error code: "+t):null)},g=function(t){o.call(e,t)},v=function(){r.nextTick(b)},b=function(){if(!d)return(!u||c&&c.ended&&!c.destroyed)&&(!l||s&&s.ended&&!s.destroyed)?void 0:o.call(e,new Error("premature close"))},y=function(){e.req.on("finish",f)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?l&&!s&&(e.on("end",h),e.on("close",h)):(e.on("complete",f),e.on("abort",v),e.req?y():e.on("request",y)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",m),e.on("end",p),e.on("finish",f),!1!==t.error&&e.on("error",g),e.on("close",v),function(){d=!0,e.removeListener("complete",f),e.removeListener("abort",v),e.removeListener("request",y),e.req&&e.req.removeListener("finish",f),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",f),e.removeListener("exit",m),e.removeListener("end",p),e.removeListener("error",g),e.removeListener("close",v)}};e.exports=a})),o.register("29wSp",(function(e,t){var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0}),n(o("2Low1"),e.exports),n(o("4OB8O"),e.exports),n(o("fAdBC"),e.exports),n(o("aZdaf"),e.exports),n(o("jL8sI"),e.exports),n(o("95BvQ"),e.exports)})),o.register("2Low1",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.createIdRemapMiddleware=void 0;var r=o("aZdaf");e.exports.createIdRemapMiddleware=function(){return(e,t,n,i)=>{const o=e.id,a=r.getUniqueId();e.id=a,t.id=a,n((r=>{e.id=o,t.id=o,r()}))}}})),o.register("aZdaf",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getUniqueId=void 0;const r=4294967295;let n=Math.floor(Math.random()*r);e.exports.getUniqueId=function(){return n=(n+1)%r,n}})),o.register("4OB8O",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.createAsyncMiddleware=void 0,e.exports.createAsyncMiddleware=function(e){return async(t,r,n,i)=>{let o;const a=new Promise((e=>{o=e}));let s=null,c=!1;const u=async()=>{c=!0,n((e=>{s=e,o()})),await a};try{await e(t,r,u),c?(await a,s(null)):i(null)}catch(e){s?s(e):i(e)}}}})),o.register("fAdBC",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.createScaffoldMiddleware=void 0,e.exports.createScaffoldMiddleware=function(e){return(t,r,n,i)=>{const o=e[t.method];return void 0===o?n():"function"==typeof o?o(t,r,n,i):(r.result=o,i())}}})),o.register("jL8sI",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.JsonRpcEngine=void 0;const n=r(o("2pniZ"));var i=o("hRd2x");class a extends n.default{push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,n)=>{try{const[i,o,s]=await a._runAllMiddleware(e,t,this._middleware);return o?(await a._runReturnHandlers(s),n(i)):r((async e=>{try{await a._runReturnHandlers(s)}catch(t){return e(t)}return e()}))}catch(e){return n(e)}}}async _handleBatch(e,t){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,r):r}catch(e){if(t)return t(e);throw e}}_promiseHandle(e){return new Promise((t=>{this._handle(e,((e,r)=>{t(r)}))}))}async _handle(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){const r=new i.EthereumRpcError(i.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(r,{id:void 0,jsonrpc:"2.0",error:r})}if("string"!=typeof e.method){const r=new i.EthereumRpcError(i.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}const r=Object.assign({},e),n={id:r.id,jsonrpc:r.jsonrpc};let o=null;try{await this._processRequest(r,n)}catch(e){o=e}return o&&(delete n.result,n.error||(n.error=i.serializeError(o))),t(o,n)}async _processRequest(e,t){const[r,n,i]=await a._runAllMiddleware(e,t,this._middleware);if(a._checkForCompletion(e,t,n),await a._runReturnHandlers(i),r)throw r}static async _runAllMiddleware(e,t,r){const n=[];let i=null,o=!1;for(const s of r)if([i,o]=await a._runMiddleware(e,t,s,n),o)break;return[i,o,n.reverse()]}static _runMiddleware(e,t,r,n){return new Promise((o=>{const a=e=>{const r=e||t.error;r&&(t.error=i.serializeError(r)),o([r,!0])},c=r=>{t.error?a(t.error):(r&&("function"!=typeof r&&a(new i.EthereumRpcError(i.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:\n${s(e)}`,{request:e})),n.push(r)),o([null,!1]))};try{r(e,t,c,a)}catch(e){a(e)}}))}static async _runReturnHandlers(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new i.EthereumRpcError(i.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:\n${s(e)}`,{request:e});if(!r)throw new i.EthereumRpcError(i.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:\n${s(e)}`,{request:e})}constructor(){super(),this._middleware=[]}}function s(e){return JSON.stringify(e,null,2)}e.exports.JsonRpcEngine=a})),o.register("2pniZ",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=o("gA44w");function n(e,t,r){try{Reflect.apply(e,t,r)}catch(e){setTimeout((()=>{throw e}))}}class i extends r.EventEmitter{emit(e,...t){let r="error"===e;const i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const r=new Error("Unhandled error."+(e?` (${e.message})`:""));throw r.context=e,r}const o=i[e];if(void 0===o)return!1;if("function"==typeof o)n(o,this,t);else{const e=o.length,r=function(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(o);for(let i=0;i<e;i+=1)n(r[i],this,t)}return!0}}e.exports.default=i})),o.register("95BvQ",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.mergeMiddleware=void 0;var r=o("jL8sI");e.exports.mergeMiddleware=function(e){const t=new r.JsonRpcEngine;return e.forEach((e=>t.push(e))),t.asMiddleware()}})),o.register("2tjzR",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.createStreamMiddleware=e.exports.createEngineStream=void 0;const n=r(o("71pc0"));e.exports.createEngineStream=n.default;const i=r(o("c93Jp"));e.exports.createStreamMiddleware=i.default})),o.register("71pc0",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=o("M5S0K");e.exports.default=function(e){if(!e||!e.engine)throw new Error("Missing engine parameter!");const{engine:t}=e,n=new r.Duplex({objectMode:!0,read:function(){return},write:function(e,r,i){t.handle(e,((e,t)=>{n.push(t)})),i()}});return t.on&&t.on("notification",(e=>{n.push(e)})),n}})),o.register("M5S0K",(function(e,t){(t=e.exports=o("3e9Ie")).Stream=t,t.Readable=t,t.Writable=o("kz9vD"),t.Duplex=o("ijGxy"),t.Transform=o("52BlP"),t.PassThrough=o("aaHmP")})),o.register("3e9Ie",(function(t,r){var n=o("itqHj"),i=o("lv8bW");t.exports=w;var a,s=o("7otZ6");w.ReadableState=y;o("gA44w").EventEmitter;var c=function(e,t){return e.listeners(t).length},u=o("qrv6K"),l=o("efuW3").Buffer,d=e.Uint8Array||function(){};var h=Object.create(o("3Z1Pl"));h.inherits=o("bOcfZ");var f=o("iegPd"),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var m,g=o("i9qjt"),v=o("b83hL");h.inherits(w,u);var b=["error","close","destroy","pause","resume"];function y(e,t){e=e||{};var r=t instanceof(a=a||o("ijGxy"));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(i||0===i)?i:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(m||(m=o("fWHvw").StringDecoder),this.decoder=new m(e.encoding),this.encoding=e.encoding)}function w(e){if(a=a||o("ijGxy"),!(this instanceof w))return new w(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function E(e,t,r,n,i){var o,a=e._readableState;null===t?(a.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,C(e)}(e,a)):(i||(o=function(e,t){var r;n=t,l.isBuffer(n)||n instanceof d||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),n?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):_(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?_(e,a,t,!1):A(e,a)):_(e,a,t,!1))):n||(a.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function _(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&C(e)),A(e,t)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),w.prototype.destroy=v.destroy,w.prototype._undestroy=v.undestroy,w.prototype._destroy=function(e,t){this.push(null),t(e)},w.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=l.from(e,t),t=""),r=!0),E(this,e,t,!1,r)},w.prototype.unshift=function(e){return E(this,e,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(e){return m||(m=o("fWHvw").StringDecoder),this._readableState.decoder=new m(e),this._readableState.encoding=e,this};var x=8388608;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=x?e=x:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function C(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(p("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(k,e):k(e))}function k(e){p("emit readable"),e.emit("readable"),R(e)}function A(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(O,e,t))}function O(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(p("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function M(e){p("readable nexttick read 0"),e.read(0)}function P(e,t){t.reading||(p("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),R(e),t.flowing&&!t.reading&&e.read(0)}function R(e){var t=e._readableState;for(p("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=l.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),0===(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function T(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(I,t,e))}function I(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function D(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}w.prototype.read=function(e){p("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?T(this):C(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&T(this),null;var n,i=t.needReadable;return p("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&p("length less than watermark",i=!0),t.ended||t.reading?p("reading or ended",i=!1):i&&(p("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(r,t))),null===(n=e>0?j(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&T(this)),null!==n&&this.emit("data",n),n},w.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,t);var a=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?l:y;function u(t,n){p("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,p("cleanup"),e.removeListener("close",v),e.removeListener("finish",b),e.removeListener("drain",d),e.removeListener("error",g),e.removeListener("unpipe",u),r.removeListener("end",l),r.removeListener("end",y),r.removeListener("data",m),h=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function l(){p("onend"),e.end()}o.endEmitted?i.nextTick(a):r.once("end",a),e.on("unpipe",u);var d=function(e){return function(){var t=e._readableState;p("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&c(e,"data")&&(t.flowing=!0,R(e))}}(r);e.on("drain",d);var h=!1;var f=!1;function m(t){p("ondata"),f=!1,!1!==e.write(t)||f||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==D(o.pipes,e))&&!h&&(p("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,f=!0),r.pause())}function g(t){p("onerror",t),y(),e.removeListener("error",g),0===c(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",b),y()}function b(){p("onfinish"),e.removeListener("close",v),y()}function y(){p("unpipe"),r.unpipe(e)}return r.on("data",m),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",g),e.once("close",v),e.once("finish",b),e.emit("pipe",r),o.flowing||(p("pipe resume"),r.resume()),e},w.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var a=D(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},w.prototype.on=function(e,t){var r=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&C(this):i.nextTick(M,this))}return r},w.prototype.addListener=w.prototype.on,w.prototype.resume=function(){var e=this._readableState;return e.flowing||(p("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(P,e,t))}(this,e)),this},w.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},w.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(p("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(p("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<b.length;o++)e.on(b[o],this.emit.bind(this,b[o]));return this._read=function(t){p("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),w._fromList=j})),o.register("lv8bW",(function(e,t){var r=o("itqHj");void 0===r||!r.version||0===r.version.indexOf("v0.")||0===r.version.indexOf("v1.")&&0!==r.version.indexOf("v1.8.")?e.exports={nextTick:function(e,t,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return r.nextTick(e);case 2:return r.nextTick((function(){e.call(null,t)}));case 3:return r.nextTick((function(){e.call(null,t,n)}));case 4:return r.nextTick((function(){e.call(null,t,n,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return r.nextTick((function(){e.apply(null,o)}))}}}:e.exports=r})),o.register("7otZ6",(function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}})),o.register("qrv6K",(function(e,t){e.exports=o("gA44w").EventEmitter})),o.register("efuW3",(function(e,t){var r=o("dkOkP"),n=r.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,e.exports),e.exports.Buffer=a),i(n,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}})),o.register("3Z1Pl",(function(e,r){var n,i,a,s,c,u,l,d,h,f,p,m,g,v,b;t(e.exports,"isArray",(function(){return n}),(function(e){return n=e})),t(e.exports,"isBoolean",(function(){return i}),(function(e){return i=e})),t(e.exports,"isNull",(function(){return a}),(function(e){return a=e})),t(e.exports,"isNullOrUndefined",(function(){return s}),(function(e){return s=e})),t(e.exports,"isNumber",(function(){return c}),(function(e){return c=e})),t(e.exports,"isString",(function(){return u}),(function(e){return u=e})),t(e.exports,"isSymbol",(function(){return l}),(function(e){return l=e})),t(e.exports,"isUndefined",(function(){return d}),(function(e){return d=e})),t(e.exports,"isRegExp",(function(){return h}),(function(e){return h=e})),t(e.exports,"isObject",(function(){return f}),(function(e){return f=e})),t(e.exports,"isDate",(function(){return p}),(function(e){return p=e})),t(e.exports,"isError",(function(){return m}),(function(e){return m=e})),t(e.exports,"isFunction",(function(){return g}),(function(e){return g=e})),t(e.exports,"isPrimitive",(function(){return v}),(function(e){return v=e})),t(e.exports,"isBuffer",(function(){return b}),(function(e){return b=e})),n=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===w(e)},i=function(e){return"boolean"==typeof e},a=function(e){return null===e},s=function(e){return null==e},c=function(e){return"number"==typeof e},u=function(e){return"string"==typeof e},l=function(e){return"symbol"==typeof e},d=function(e){return void 0===e},h=function(e){return"[object RegExp]"===w(e)},f=function(e){return"object"==typeof e&&null!==e},p=function(e){return"[object Date]"===w(e)},m=function(e){return"[object Error]"===w(e)||e instanceof Error},g=function(e){return"function"==typeof e},v=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e};var y=o("dkOkP");function w(e){return Object.prototype.toString.call(e)}b=y.Buffer.isBuffer})),o.register("i9qjt",(function(e,t){var r=o("efuW3").Buffer,n=o("iegPd");e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i,o=r.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,n=o,i=s,t.copy(n,i),s+=a.data.length,a=a.next;return o},e}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var e=n.inspect({length:this.length});return this.constructor.name+" "+e})})),o.register("b83hL",(function(e,t){var r=o("lv8bW");function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var i=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(n,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(n,i,e),i._writableState&&(i._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}})),o.register("ijGxy",(function(e,t){var r=o("lv8bW"),n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=d;var i=Object.create(o("3Z1Pl"));i.inherits=o("bOcfZ");var a=o("3e9Ie"),s=o("kz9vD");i.inherits(d,a);for(var c=n(s.prototype),u=0;u<c.length;u++){var l=c[u];d.prototype[l]||(d.prototype[l]=s.prototype[l])}function d(e){if(!(this instanceof d))return new d(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}})),o.register("kz9vD",(function(t,r){var n=o("lv8bW");function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}t.exports=v;var a,s=n.nextTick;v.WritableState=g;var c=Object.create(o("3Z1Pl"));c.inherits=o("bOcfZ");var u={deprecate:o("dRVvk")},l=o("qrv6K"),d=o("efuW3").Buffer,h=e.Uint8Array||function(){};var f,p=o("b83hL");function m(){}function g(e,t){a=a||o("ijGxy"),e=e||{};var r=t instanceof a;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var c=e.highWaterMark,u=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=c||0===c?c:r&&(u||0===u)?u:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===e.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(o(i),e._writableState.errorEmitted=!0,e.emit("error",i),x(e,t))}(e,r,i,t,o);else{var a=E(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||w(e,r),i?s(y,e,r,a,o):y(e,r,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function v(e){if(a=a||o("ijGxy"),!(f.call(v,this)||this instanceof a))return new v(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function b(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function y(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),x(e,t)}function w(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0,c=!0;r;)o[s]=r,r.isBuf||(c=!1),r=r.next,s+=1;o.allBuffers=c,b(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,d=r.callback;if(b(e,t,!1,t.objectMode?1:u.length,u,l,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),x(e,t)}))}function x(e,t){var r=E(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,n.nextTick(_,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}c.inherits(v,l),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!f.call(this,e)||this===v&&(e&&e._writableState instanceof g)}})):f=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,r){var i,o=this._writableState,a=!1,s=!o.objectMode&&(i=e,d.isBuffer(i)||i instanceof h);return s&&!d.isBuffer(e)&&(e=function(e){return d.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=m),o.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),n.nextTick(t,r)}(this,r):(s||function(e,t,r,i){var o=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),n.nextTick(i,a),o=!1),o}(this,o,e,r))&&(o.pendingcb++,a=function(e,t,r,n,i,o){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,r));return t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,s,n,i,o);return c}(this,o,s,e,t,r)),a},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,r){t.ending=!0,x(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=p.destroy,v.prototype._undestroy=p.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}})),o.register("fWHvw",(function(e,r){var n;t(e.exports,"StringDecoder",(function(){return n}),(function(e){return n=e}));var i=o("efuW3").Buffer,a=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=d,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=h,this.end=f,t=3;break;default:return this.write=p,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function c(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function d(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function h(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}n=s,s.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=c(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=c(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=c(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}})),o.register("52BlP",(function(e,t){e.exports=a;var r=o("ijGxy"),n=Object.create(o("3Z1Pl"));function i(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){c(e,t,r)})):c(this,null,null)}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}n.inherits=o("bOcfZ"),n.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}})),o.register("aaHmP",(function(e,t){e.exports=i;var r=o("52BlP"),n=Object.create(o("3Z1Pl"));function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n.inherits=o("bOcfZ"),n.inherits(i,r),i.prototype._transform=function(e,t,r){r(null,e)}})),o.register("c93Jp",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const n=r(o("2pniZ"));var i=o("M5S0K");e.exports.default=function(){const e={},t=new i.Duplex({objectMode:!0,read:function(){return!1},write:function(t,n,i){let o;try{!t.id?function(e){r.emit("notification",e)}(t):function(t){const r=e[t.id];if(!r)throw new Error(`StreamMiddleware - Unknown response id "${t.id}"`);delete e[t.id],Object.assign(r.res,t),setTimeout(r.end)}(t)}catch(e){o=e}i(o)}}),r=new n.default;return{events:r,middleware:(r,n,i,o)=>{t.push(r),e[r.id]={req:r,res:n,next:i,end:o}},stream:t}}})),o.register("2aDws",(function(e,t){var r=o("5vQr5");e.exports=r.ObjectMultiplex})),o.register("5vQr5",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ObjectMultiplex=void 0;var n=o("M5S0K");const i=r(o("6pXAD")),a=r(o("5rrjE"));var s=o("NhAQu");const c=Symbol("IGNORE_SUBSTREAM");class u extends n.Duplex{createStream(e){if(this.destroyed)throw new Error(`ObjectMultiplex - parent stream for name "${e}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw new Error(`ObjectMultiplex - parent stream for name "${e}" already ended`);if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new s.Substream({parent:this,name:e});return this._substreams[e]=t,function(e,t){const r=a.default(t);i.default(e,{readable:!1},r),i.default(e,{writable:!1},r)}(this,(e=>t.destroy(e||void 0))),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=c}_read(){}_write(e,t,r){const{name:n,data:i}=e;if(!n)return console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),r();const o=this._substreams[n];return o?(o!==c&&o.push(i),r()):(console.warn(`ObjectMultiplex - orphaned data for stream "${n}"`),r())}constructor(e={}){super(Object.assign(Object.assign({},e),{objectMode:!0})),this._substreams={}}}e.exports.ObjectMultiplex=u})),o.register("NhAQu",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Substream=void 0;var r=o("M5S0K");class n extends r.Duplex{_read(){}_write(e,t,r){this._parent.push({name:this._name,data:e}),r()}constructor({parent:e,name:t}){super({objectMode:!0}),this._parent=e,this._name=t}}e.exports.Substream=n})),o.register("9EUTU",(function(e,t){var r=Array.isArray,n=Object.keys,i=Object.prototype.hasOwnProperty;e.exports=function e(t,o){if(t===o)return!0;if(t&&o&&"object"==typeof t&&"object"==typeof o){var a,s,c,u=r(t),l=r(o);if(u&&l){if((s=t.length)!=o.length)return!1;for(a=s;0!=a--;)if(!e(t[a],o[a]))return!1;return!0}if(u!=l)return!1;var d=t instanceof Date,h=o instanceof Date;if(d!=h)return!1;if(d&&h)return t.getTime()==o.getTime();var f=t instanceof RegExp,p=o instanceof RegExp;if(f!=p)return!1;if(f&&p)return t.toString()==o.toString();var m=n(t);if((s=m.length)!==n(o).length)return!1;for(a=s;0!=a--;)if(!i.call(o,m[a]))return!1;for(a=s;0!=a--;)if(!e(t[c=m[a]],o[c]))return!1;return!0}return t!=t&&o!=o}})),o.register("hlRJ1",(function(e,t){const r=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;r.writable=e=>r(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,r.readable=e=>r(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,r.duplex=e=>r.writable(e)&&r.readable(e),r.transform=e=>r.duplex(e)&&"function"==typeof e._transform,e.exports=r})),o.register("aVAn0",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const n=r(o("b2vqN"));var i=o("bmypb");const a=r(o("f2EzX")),s=r(o("jwCaG")),c=i.detect();e.exports.default=function(){let e;try{const t=function(){switch(null==c?void 0:c.name){case"chrome":default:return s.default.CHROME_ID;case"firefox":return s.default.FIREFOX_ID}}(),r=chrome.runtime.connect(t),i=new n.default(r);e=new a.default(i)}catch(e){throw console.dir("Metamask connect error ",e),e}return e}})),o.register("b2vqN",(function(e,t){var r=o("dkOkP").Buffer,n=o("c2m75");e.exports=class extends n.Duplex{_onMessage(e){if(r.isBuffer(e)){const t=r.from(e);this.push(t)}else this.push(e)}_onDisconnect(){this.destroy()}_read(){}_write(e,t,n){try{if(r.isBuffer(e)){const t=e.toJSON();t._isBuffer=!0,this._port.postMessage(t)}else this._port.postMessage(e)}catch(e){return n(new Error("PortDuplexStream - disconnected"))}return n()}constructor(e){super({objectMode:!0}),this._port=e,this._port.onMessage.addListener((e=>this._onMessage(e))),this._port.onDisconnect.addListener((()=>this._onDisconnect()))}}})),o.register("bmypb",(function(e,r){t(e.exports,"detect",(function(){return p}),(function(e){return p=e}));var n=o("itqHj"),i=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},a=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},s=function(e){this.version=e,this.type="node",this.name="node",this.os=n.platform},c=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"},u=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},l=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},d=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,h=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],f=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function p(e){return e?g(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new l:"undefined"!=typeof navigator?g(navigator.userAgent):void 0!==n&&n.version?new s(n.version.slice(1)):null}function m(e){return""!==e&&h.reduce((function(t,r){var n=r[0],i=r[1];if(t)return t;var o=i.exec(e);return!!o&&[n,o]}),!1)}function g(e){var t=m(e);if(!t)return null;var r=t[0],n=t[1];if("searchbot"===r)return new u;var o=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);o?o.length<3&&(o=i(i([],o,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-o.length),!0)):o=[];var s=o.join("."),l=function(e){for(var t=0,r=f.length;t<r;t++){var n=f[t],i=n[0];if(n[1].exec(e))return i}return null}(e),h=d.exec(e);return h&&h[1]?new c(r,s,l,h[1]):new a(r,s,l)}})),o.register("jwCaG",(function(e,t){e.exports=JSON.parse('{"CHROME_ID":"nkbihfbeogaeaoehlefnkodbefgpgknn","FIREFOX_ID":"webextension@metamask.io"}')})),o.register("ergLV",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t=console){let r=!1,n=!1;if(!window.web3){const i="__isMetaMaskShim__";let o={currentProvider:e};Object.defineProperty(o,i,{value:!0,enumerable:!0,configurable:!1,writable:!1}),o=new Proxy(o,{get:(o,a,...s)=>("currentProvider"!==a||r?"currentProvider"===a||a===i||n||(n=!0,t.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),e.request({method:"metamask_logWeb3ShimUsage"}).catch((e=>{t.debug("MetaMask: Failed to log web3 shim usage.",e)}))):(r=!0,t.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(o,a,...s)),set:(...e)=>(t.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...e))}),Object.defineProperty(window,"web3",{value:o,enumerable:!1,configurable:!0,writable:!0})}}}));var a,s=o("aZikt"),c=o("ihAua"),u=(s=o("aZikt"),o("l509A"));!function(e){e.Update="Web3ReactUpdate",e.Error="Web3ReactError",e.Deactivate="Web3ReactDeactivate"}(a||(a={}));var l=o("6kwck"),d=o("eflID");function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function f(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,m(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e,t,r){return(v=g()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&m(i,r.prototype),i}).apply(null,arguments)}function b(e){var t="function"==typeof Map?new Map:void 0;return b=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return v(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,e)},b(e)}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function y(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}function w(e){if("string"==typeof e){e=e.replace(/^Ox/,"0x");var t=Number.parseInt(e,"0x"===e.trim().substring(0,2)?16:10);return Number.isNaN(t)&&u.default(!1),t}return!Number.isInteger(e)&&u.default(!1),e}function E(e){("string"!=typeof e||!e.match(/^(0x)?[0-9a-fA-F]{40}$/))&&u.default(!1);for(var t="0x"===e.substring(0,2)?e:"0x"+e,r=t.toLowerCase().substring(2).split(""),n=new Uint8Array(40),i=0;i<40;i++)n[i]=r[i].charCodeAt(0);for(var o=l.arrayify(d.keccak256(n)),a=0;a<40;a+=2)o[a>>1]>>4>=8&&(r[a]=r[a].toUpperCase()),(15&o[a>>1])>=8&&(r[a+1]=r[a+1].toUpperCase());var s="0x"+r.join("");return t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==s&&u.default(!1),s}var _,x,S=function(e,t){try{var r=function(r){return Promise.resolve(Promise.all([void 0===t.chainId?e.getChainId():t.chainId,void 0===t.account?e.getAccount():t.account])).then((function(t){var n=t[0],i=t[1],o=w(n);if(e.supportedChainIds&&!e.supportedChainIds.includes(o))throw new k(o,e.supportedChainIds);var a=null===i?i:E(i);return{provider:r,chainId:o,account:a}}))},n=void 0===t.provider;return Promise.resolve(n?Promise.resolve(e.getProvider()).then(r):r(t.provider))}catch(e){return Promise.reject(e)}},C=function(e){function t(){var t;return(t=e.call(this)||this).name=t.constructor.name,t}return f(t,e),t}(b(Error)),k=function(e){function t(t,r){var n;return(n=e.call(this)||this).name=n.constructor.name,n.message="Unsupported chain id: "+t+". Supported chain ids are: "+r+".",n}return f(t,e),t}(b(Error));function A(e,t){var r=t.type,n=t.payload;switch(r){case _.ACTIVATE_CONNECTOR:return{connector:n.connector,provider:n.provider,chainId:n.chainId,account:n.account,onError:n.onError};case _.UPDATE:var i=n.provider,o=n.chainId,a=n.account;return h({},e,void 0===i?{}:{provider:i},void 0===o?{}:{chainId:o},void 0===a?{}:{account:a});case _.UPDATE_FROM_ERROR:var s=n.provider,c=n.chainId,u=n.account;return h({},e,void 0===s?{}:{provider:s},void 0===c?{}:{chainId:c},void 0===u?{}:{account:u},{error:void 0});case _.ERROR:var l=n.error;return{connector:e.connector,error:l,onError:e.onError};case _.ERROR_FROM_ACTIVATION:return{connector:n.connector,error:n.error};case _.DEACTIVATE_CONNECTOR:return{}}}(x=_||(_={}))[x.ACTIVATE_CONNECTOR=0]="ACTIVATE_CONNECTOR",x[x.UPDATE=1]="UPDATE",x[x.UPDATE_FROM_ERROR=2]="UPDATE_FROM_ERROR",x[x.ERROR=3]="ERROR",x[x.ERROR_FROM_ACTIVATION=4]="ERROR_FROM_ACTIVATION",x[x.DEACTIVATE_CONNECTOR=5]="DEACTIVATE_CONNECTOR";var O={};function M(e){O[e]&&u.default(!1),O[e]=s.createContext({activate:function(){try{return u.default(!1),Promise.resolve()}catch(e){return Promise.reject(e)}},setError:function(){u.default(!1)},deactivate:function(){u.default(!1)},active:!1}),O[e].displayName="Web3ReactContext - "+e;var t=O[e].Provider;return function(e){var n=e.getLibrary,i=e.children,o=function(){var e=s.useReducer(A,{}),t=e[0],r=e[1],n=t.connector,i=t.provider,o=t.chainId,c=t.account,u=t.onError,l=t.error,d=s.useRef(-1);d.current+=1;var f=s.useCallback((function(e,t,n){void 0===n&&(n=!1);try{var i=d.current,o=!1;return Promise.resolve(y((function(){return Promise.resolve(e.activate().then((function(e){return o=!0,e}))).then((function(n){return Promise.resolve(S(e,n)).then((function(n){if(d.current>i)throw new C;r({type:_.ACTIVATE_CONNECTOR,payload:h({connector:e},n,{onError:t})})}))}))}),(function(i){if(i instanceof C)o&&e.deactivate();else{if(n)throw o&&e.deactivate(),i;t?(o&&e.deactivate(),t(i)):r({type:_.ERROR_FROM_ACTIVATION,payload:{connector:e,error:i}})}})))}catch(e){return Promise.reject(e)}}),[]),p=s.useCallback((function(e){r({type:_.ERROR,payload:{error:e}})}),[]),m=s.useCallback((function(){r({type:_.DEACTIVATE_CONNECTOR})}),[]),g=s.useCallback((function(e){try{if(!n)throw Error("This should never happen, it's just so Typescript stops complaining");var t=d.current;return Promise.resolve(function(){if(l)return y((function(){return Promise.resolve(S(n,e)).then((function(e){if(d.current>t)throw new C;r({type:_.UPDATE_FROM_ERROR,payload:e})}))}),(function(e){e instanceof C||(u?u(e):r({type:_.ERROR,payload:{error:e}}))}));var i=void 0===e.chainId?void 0:w(e.chainId);if(void 0!==i&&n.supportedChainIds&&!n.supportedChainIds.includes(i)){var o=new k(i,n.supportedChainIds);u?u(o):r({type:_.ERROR,payload:{error:o}})}else{var a="string"==typeof e.account?E(e.account):e.account;r({type:_.UPDATE,payload:{provider:e.provider,chainId:i,account:a}})}}())}catch(e){return Promise.reject(e)}}),[n,l,u]),v=s.useCallback((function(e){u?u(e):r({type:_.ERROR,payload:{error:e}})}),[u]),b=s.useCallback((function(){r({type:_.DEACTIVATE_CONNECTOR})}),[]);return s.useEffect((function(){return function(){n&&n.deactivate()}}),[n]),s.useEffect((function(){return n&&n.on(a.Update,g).on(a.Error,v).on(a.Deactivate,b),function(){n&&n.off(a.Update,g).off(a.Error,v).off(a.Deactivate,b)}}),[n,g,v,b]),{connector:n,provider:i,chainId:o,account:c,activate:f,setError:p,deactivate:m,error:l}}(),c=o.connector,u=o.provider,l=o.chainId,d=o.account,f=o.activate,p=o.setError,m=o.deactivate,g=o.error,v=void 0!==c&&void 0!==l&&void 0!==d&&!g,b=s.useMemo((function(){return v&&void 0!==l&&Number.isInteger(l)&&c?n(u,c):void 0}),[v,n,u,c,l]),x={connector:c,library:b,chainId:l,account:d,activate:f,setError:p,deactivate:m,active:v,error:g};return r(s).createElement(t,{value:x},i)}}var P=M("primary");function R(e){return s.useContext(function(e){return void 0===e&&(e="primary"),!Object.keys(O).includes(e)&&u.default(!1),O[e]}(e))}var j,T={},I=T&&T.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(T,"__esModule",{value:!0}),T.createExternalExtensionProvider=T.shimWeb3=T.setGlobalProvider=T.BaseProvider=T.MetaMaskInpageProvider=T.initializeProvider=void 0;const D=I(o("9aN3i"));T.MetaMaskInpageProvider=D.default;const N=I(o("aVAn0"));T.createExternalExtensionProvider=N.default;const W=I(o("f2EzX"));T.BaseProvider=W.default;var B={},F=B&&B.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(B,"__esModule",{value:!0}),B.setGlobalProvider=B.initializeProvider=void 0;const L=F(o("9aN3i")),q=F(o("ergLV"));function U(e){window.ethereum=e,window.dispatchEvent(new Event("ethereum#initialized"))}B.initializeProvider=function({connectionStream:e,jsonRpcStreamName:t,logger:r=console,maxEventListeners:n=100,shouldSendMetadata:i=!0,shouldSetOnWindow:o=!0,shouldShimWeb3:a=!1}){let s=new L.default(e,{jsonRpcStreamName:t,logger:r,maxEventListeners:n,shouldSendMetadata:i});return s=new Proxy(s,{deleteProperty:()=>!0}),o&&U(s),a&&q.default(s,r),s},B.setGlobalProvider=U,Object.defineProperty(T,"initializeProvider",{enumerable:!0,get:function(){return B.initializeProvider}}),Object.defineProperty(T,"setGlobalProvider",{enumerable:!0,get:function(){return B.setGlobalProvider}});const H=I(o("ergLV"));T.shimWeb3=H.default;var V=T.MetaMaskInpageProvider,z=o("b2vqN"),$=o("itqHj");function J(e){var t=K([["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]]).filter((function(t){return t.rule&&t.rule.test(e)}))[0];return t?t.name:null}function Z(){return void 0!==$&&$.version&&{name:"node",version:$.version.slice(1),os:$.platform}}function G(e){var t=K([["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/]]);if(!e)return null;var r=t.map((function(t){var r=t.rule.exec(e),n=r&&r[1].split(/[._]/).slice(0,3);return n&&n.length<3&&(n=n.concat(1==n.length?[0,0]:[0])),r&&{name:t.name,version:n.join(".")}})).filter(Boolean)[0]||null;return r&&(r.os=J(e)),/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/i.test(e)&&((r=r||{}).bot=!0),r}function K(e){return e.map((function(e){return{name:e[0],rule:e[1]}}))}const X=(0,{detect:function(){return"undefined"!=typeof navigator?G(navigator.userAgent):Z()},detectOS:J,getNodeVersion:Z,parseUserAgent:G}.detect)();var Q;Q=JSON.parse('{"CHROME_ID":"nkbihfbeogaeaoehlefnkodbefgpgknn","FIREFOX_ID":"webextension@metamask.io"}'),j=function(){let e;try{let t=function(){switch(X&&X.name){case"chrome":default:return Q.CHROME_ID;case"firefox":return Q.FIREFOX_ID}}();const r=chrome.runtime.connect(t),n=new z(r);e=new V(n)}catch(e){throw console.dir("Metamask connect error ",e),e}return e};var Y=o("amy7i");o("6CHoY");var ee=o("ci2Mj"),te=o("8C6BZ"),re=o("iyOkC"),ne=o("5cKs6"),ie=o("6a67Q"),oe=o("eduP0"),ae=(s=o("aZikt"),Y=o("amy7i"),o("4yWCU"));const se={latestBlockNumber:void 0},ce=r(s).createContext(se),ue=({children:e})=>{const{chainId:t,library:n}=R(),[i,o]=s.useState();return s.useEffect((()=>{if(void 0===t)return;const e=null!=n?n:new Y.AlchemyProvider(t,ae.ALCHEMY_API_KEY);let r=!1;return e.getBlockNumber().then((e=>{r||o(e)})),e.on("block",(e=>{o(e)})),()=>{e.removeAllListeners("block"),o(void 0),r=!0}}),[t,n]),r(s).createElement(ce.Provider,{value:{latestBlockNumber:i}},e)},le=()=>r(s).useContext(ce);var de={};t(de,"EthAssetsProvider",(function(){return ke}),(function(e){return ke=e})),t(de,"useEthAssets",(function(){return Ae}),(function(e){return Ae=e}));s=o("aZikt");const he={1:[{address:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",name:"Wrapped Ether",symbol:"WETH",decimals:18,iconUrl:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png"},{address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",name:"USD Coin",symbol:"USDC",decimals:6,iconUrl:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48/logo.png"},{address:"0xdAC17F958D2ee523a2206206994597C13D831ec7",name:"Tether USD",symbol:"USDT",decimals:6,iconUrl:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xdAC17F958D2ee523a2206206994597C13D831ec7/logo.png"}]};var fe=o("9r4tU"),pe=o("6oEu9"),me=o("lwple"),ge=(pe=o("6oEu9"),o("64C6w")),ve=o("jC9PB"),be=o("cFuyE"),ye=o("1yeHx"),we={};t(we,"fetchEthGasStationPrice",(function(){return xe}),(function(e){return xe=e}));pe=o("6oEu9"),ve=o("jC9PB"),ae=o("4yWCU");var Ee=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const _e=`https://ethgasstation.info/api/ethgasAPI.json?api-key=${ae.DEFI_PULSE_API_KEY}`,xe=()=>Ee(void 0,void 0,void 0,(function*(){const e=yield fetch(_e),t=yield e.json();return new ve.BigNumber(t.fast/10*pe.WEI_IN_GWEI)}));var Se=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const Ce=s.createContext({refreshEthBalances:pe.NOOP}),ke=({children:e})=>{const{account:t,chainId:n,library:i}=R(),[o,a]=s.useState(),[c,u]=s.useState(),[l,d]=s.useState(),[h,f]=s.useState(),[p,m]=s.useState(!1),{latestBlockNumber:g}=le(),v=(e=!1)=>Se(void 0,void 0,void 0,(function*(){if(t&&n&&i){m(e);try{const e=yield i.getBalance(t),r=yield Promise.all(he[n].map((e=>Se(void 0,void 0,void 0,(function*(){const r=e.address,n=yield ge.ERC20__factory.connect(r,i).balanceOf(t),o=new ve.BigNumber(n.toString());return Object.assign(Object.assign({},e),{chain:me.Chain.Ethereum,type:"fungible",baseBalance:new ve.BigNumber(o.toString()),balance:be.amountToUiAmount(o,e.decimals)})})))));a(new ve.BigNumber(e.toString())),u(r)}catch(e){console.error(e)}finally{m(!1)}}}));s.useEffect((()=>{try{v(!0)}catch(e){console.error(e)}}),[t]),s.useEffect((()=>{try{v(!1),Se(void 0,void 0,void 0,(function*(){const e=yield ye.fetchEthPrice();d(e)})),Se(void 0,void 0,void 0,(function*(){const e=yield we.fetchEthGasStationPrice();f(e)}))}catch(e){console.error(e)}}),[g]);const b=s.useMemo((()=>{if(!c||!t||!o)return;return[Object.assign(Object.assign({},pe.ETHEREUM),{chain:me.Chain.Ethereum,baseBalance:o,balance:be.amountToUiAmount(o,pe.ETHEREUM.decimals)})].concat(c)}),[t,o,c]);return r(s).createElement(Ce.Provider,{value:{ethBalance:o,assets:b,ethPrice:l,gasPrice:h,refreshEthBalances:v,isRefreshingBalances:p}},e)},Ae=()=>{const e=s.useContext(Ce),t=s.useMemo((()=>e.assets?fe.sortedAssets(e.assets):void 0),[e.assets]);return Object.assign(Object.assign({},e),{assets:t})};var Oe=o("82Ilk"),Me=o("eeuNW"),Pe=o("g9lcT"),Re=o("ixd3d"),je=o("h5G75"),Te=o("bMYcF"),Ie=o("i2Zy4"),De=o("jSC0s"),Ne=o("9P0Mo"),We={};t(We,"BridgeFlow",(function(){return Pr}),(function(e){return Pr=e}));s=o("aZikt");var Be,Fe=o("hHMPk"),Le=/^(?:0|[1-9]\d*)$/;var qe,Ue,He=Object.prototype,Ve=He.hasOwnProperty,ze=He.toString,$e=He.propertyIsEnumerable,Je=(qe=Object.keys,Ue=Object,function(e){return qe(Ue(e))});function Ze(e,t){var r=nt(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&it(e)}(e)&&Ve.call(e,"callee")&&(!$e.call(e,"callee")||"[object Arguments]"==ze.call(e))}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!Ve.call(e,o)||i&&("length"==o||Ye(o,n))||r.push(o);return r}var Ge,Ke=function(e,t,r){for(var n=-1,i=Object(e),o=r(e),a=o.length;a--;){var s=o[Ge?a:++n];if(!1===t(i[s],s,i))break}return e};function Xe(e,t,r,n){return function(e,t){e&&Ke(e,t,ot)}(e,(function(e,i,o){t(n,r(e),i,o)})),n}function Qe(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||He,t!==n)return Je(e);var t,r,n,i=[];for(var o in Object(e))Ve.call(e,o)&&"constructor"!=o&&i.push(o);return i}function Ye(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||Le.test(e))&&e>-1&&e%1==0&&e<t}var et,tt,rt,nt=Array.isArray;function it(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?ze.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}function ot(e){return it(e)?Ze(e):Qe(e)}Be=(et=function(e,t,r){e[t]=r},rt=function(e){return e},tt=function(){return rt},function(e,t){return Xe(e,et,tt(t),{})});var at=o("h6IZU"),st=(me=o("lwple"),o("lkahF")),ct=(te=o("8C6BZ"),ae=o("4yWCU"),be=o("cFuyE"),o("iXlMH")),ut=o("dDdwq"),lt=(ie=o("6a67Q"),Oe=o("82Ilk"),o("7zHiM"));s=o("aZikt");var dt={};t(dt,"useSolConfirmations",(function(){return ft}),(function(e){return ft=e}));s=o("aZikt"),ct=o("iXlMH");var ht=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const ft=(e,t)=>{const[r,n]=s.useState(void 0);return[r,i=>ht(void 0,void 0,void 0,(function*(){yield ct.waitForSlots(e,t,i,(e=>{const o=Math.min(t,Math.max(e-i,0));n(Math.max(o,null!=r?r:0))}))}))]};var pt,mt,gt=o("amilJ"),vt=o("hJDxl"),bt=o("epVy9"),yt=o("gkUV0"),wt=o("g7X40");!function(e){e[e.TokenApproval=0]="TokenApproval",e[e.LockUp=1]="LockUp",e[e.AwaitConfirmations=2]="AwaitConfirmations",e[e.AwaitTransfer=3]="AwaitTransfer",e[e.Done=4]="Done"}(pt||(pt={})),function(e){e[e.LockUp=0]="LockUp",e[e.AwaitConfirmations=1]="AwaitConfirmations",e[e.AwaitVaa=2]="AwaitVaa",e[e.ClaimAsset=3]="ClaimAsset",e[e.Done=4]="Done"}(mt||(mt={}));var Et={};t(Et,"BridgeSwapper",(function(){return Ot}),(function(e){return Ot=e}));s=o("aZikt"),Fe=o("hHMPk"),pe=o("6oEu9"),be=o("cFuyE");var _t=o("6rMcH"),xt=o("lPkGw"),St=o("2cgmz"),Ct=o("f2RwE"),kt=(yt=o("gkUV0"),wt=o("g7X40"),o("aADTv")),At=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const Ot=e=>{var{spinnerColor:t,fromAssetAmount:n,currentBridgeStep:i,onBackClick:o,onBridgeRetry:a=pe.NOOP,onClose:c=pe.NOOP,bridgeStepInfos:u=[]}=e,l=At(e,["spinnerColor","fromAssetAmount","currentBridgeStep","onBackClick","onBridgeRetry","onClose","bridgeStepInfos"]);const{symbol:d,iconUrl:h}=l.fromAsset,f=r(s).createElement(It,{stepInfos:u,currentStep:i,title:`Convert ${be.formatTokenAmount(null!=n?n:0)} ${d}`,iconUrl:h,onButtonClick:()=>{"failure"!==(null==i?void 0:i.status)?c():a()},spinnerColor:t}),p=void 0!==i?[{view:f,opts:{shouldShowBackButton:void 0===i||0===i.index||"failure"===i.status}}]:[];return r(s).createElement(_t.DetailViewsController,{stack:p,popDetailView:o},r(s).createElement(Ct.Swapper,Object.assign({},l)))},Mt=Fe.default.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
`,Pt=Fe.default.div`
  margin-top: 25px;
  display: flex;
  flex-direction: column;
  align-items: center;
  *:first-child {
    margin-bottom: 15px;
  }
  margin-bottom: ${e=>e.marginBottom}px;
`,Rt=Fe.default.div`
  display: flex;
  align-items: center;
  justify-content: center;
`,jt=Fe.default.div`
  display: flex;
  width: 270px;
  flex-direction: column;
`,Tt=Fe.default.div`
  display: flex;
  margin: 5px 0px;
  align-items: center;
  > * {
    margin-right: 11px;
  }
`,It=({title:e,iconUrl:t,stepInfos:n,currentStep:i,spinnerColor:o,onButtonClick:a})=>{const c=!(n.length===(null==i?void 0:i.index))&&"failure"!==(null==i?void 0:i.status),u=3===n.length?30:20;return r(s).createElement(Mt,null,r(s).createElement("div",null,r(s).createElement(Pt,{marginBottom:u},r(s).createElement(yt.TokenImage,{iconUrl:t,width:80,questionMarkWidth:80}),r(s).createElement(wt.Text,{color:"#FFF",size:30,weight:500},e)),r(s).createElement(Rt,null,r(s).createElement(jt,null,n.map(((e,t)=>{var n;const a=t<(null!==(n=null==i?void 0:i.index)&&void 0!==n?n:0),c=t===(null==i?void 0:i.index);let u=r(s).createElement("div",{style:{width:22}});return c&&("loading"===(null==i?void 0:i.status)&&(u=r(s).createElement(xt.Spinner,{diameter:22,color:o})),"failure"===(null==i?void 0:i.status)&&(u=r(s).createElement(St.ConfirmationIcon,{type:St.ConfirmationIconType.Failure,backgroundWidth:22,iconWidth:9}))),a&&(u=r(s).createElement(St.ConfirmationIcon,{type:St.ConfirmationIconType.Success,backgroundWidth:22,iconWidth:9})),r(s).createElement(Tt,{key:e.name},u,r(s).createElement(wt.Text,{size:16,color:"#999",noWrap:!0},e.name))}))))),r(s).createElement(kt.Button,{onClick:a,disabled:c},((e,t)=>{const r=e.length===(null==t?void 0:t.index);if(!t)return"Start";if(r)return"Close";const{index:n,status:i}=t;return"failure"===i?"Try again":e[n].buttonText})(n,i)))};var Dt={};t(Dt,"METAMASK_MODAL_ID",(function(){return cr}),(function(e){return cr=e})),t(Dt,"MetamaskIsland",(function(){return dr}),(function(e){return dr=e}));s=o("aZikt"),Fe=o("hHMPk");var Nt=function(e){var t,r;function n(t){var r,n=(void 0===t?{}:t).supportedChainIds;return(r=e.call(this)||this).supportedChainIds=n,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.emitUpdate=function(e){this.emit(a.Update,e)},i.emitError=function(e){this.emit(a.Error,e)},i.emitDeactivate=function(){this.emit(a.Deactivate)},n}(o("gA44w").EventEmitter);function Wt(){return Wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wt.apply(this,arguments)}function Bt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ut(e,t,r){return(Ut=qt()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&Lt(i,r.prototype),i}).apply(null,arguments)}function Ht(e){var t="function"==typeof Map?new Map:void 0;return Ht=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ut(e,arguments,Ft(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Lt(n,e)},Ht(e)}function Vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function zt(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}function $t(e){return e.hasOwnProperty("result")?e.result:e}var Jt=function(e){function t(){var t;return(t=e.call(this)||this).name=t.constructor.name,t.message="No Ethereum provider was found on window.ethereum.",t}return Bt(t,e),t}(Ht(Error)),Zt=function(e){function t(){var t;return(t=e.call(this)||this).name=t.constructor.name,t.message="The user rejected the request.",t}return Bt(t,e),t}(Ht(Error)),Gt=function(e){function t(t){var r;return(r=e.call(this,t)||this).handleNetworkChanged=r.handleNetworkChanged.bind(Vt(r)),r.handleChainChanged=r.handleChainChanged.bind(Vt(r)),r.handleAccountsChanged=r.handleAccountsChanged.bind(Vt(r)),r.handleClose=r.handleClose.bind(Vt(r)),r}Bt(t,e);var r=t.prototype;return r.handleChainChanged=function(e){this.emitUpdate({chainId:e,provider:window.ethereum})},r.handleAccountsChanged=function(e){0===e.length?this.emitDeactivate():this.emitUpdate({account:e[0]})},r.handleClose=function(e,t){this.emitDeactivate()},r.handleNetworkChanged=function(e){this.emitUpdate({chainId:e,provider:window.ethereum})},r.activate=function(){try{var e,t=function(t){if(r)return t;function n(){return Wt({provider:window.ethereum},e?{account:e}:{})}var i=function(){if(!e)return Promise.resolve(window.ethereum.enable().then((function(e){return e&&$t(e)[0]}))).then((function(t){e=t}))}();return i&&i.then?i.then(n):n()},r=!1,n=this;if(!window.ethereum)throw new Jt;window.ethereum.on&&(window.ethereum.on("chainChanged",n.handleChainChanged),window.ethereum.on("accountsChanged",n.handleAccountsChanged),window.ethereum.on("close",n.handleClose),window.ethereum.on("networkChanged",n.handleNetworkChanged)),window.ethereum.isMetaMask&&(window.ethereum.autoRefreshOnNetworkChange=!1);var i=zt((function(){return Promise.resolve(window.ethereum.send("eth_requestAccounts").then((function(e){return $t(e)[0]}))).then((function(t){e=t}))}),(function(e){if(4001===e.code)throw new Zt}));return Promise.resolve(i&&i.then?i.then(t):t(i))}catch(e){return Promise.reject(e)}},r.getProvider=function(){try{return Promise.resolve(window.ethereum)}catch(e){return Promise.reject(e)}},r.getChainId=function(){try{var e,t=function(){function t(){if(!e)try{e=$t(window.ethereum.send({method:"net_version"}))}catch(e){}return e||(e=window.ethereum.isDapper?$t(window.ethereum.cachedResults.net_version):window.ethereum.chainId||window.ethereum.netVersion||window.ethereum.networkVersion||window.ethereum._chainId),e}var r=function(){if(!e){var t=zt((function(){return Promise.resolve(window.ethereum.send("net_version").then($t)).then((function(t){e=t}))}),(function(){}));if(t&&t.then)return t.then((function(){}))}}();return r&&r.then?r.then(t):t()};if(!window.ethereum)throw new Jt;var r=zt((function(){return Promise.resolve(window.ethereum.send("eth_chainId").then($t)).then((function(t){e=t}))}),(function(){}));return Promise.resolve(r&&r.then?r.then(t):t())}catch(e){return Promise.reject(e)}},r.getAccount=function(){try{var e,t=function(){function t(){return e||(e=$t(window.ethereum.send({method:"eth_accounts"}))[0]),e}var r=function(){if(!e){var t=zt((function(){return Promise.resolve(window.ethereum.enable().then((function(e){return $t(e)[0]}))).then((function(t){e=t}))}),(function(){}));if(t&&t.then)return t.then((function(){}))}}();return r&&r.then?r.then(t):t()};if(!window.ethereum)throw new Jt;var r=zt((function(){return Promise.resolve(window.ethereum.send("eth_accounts").then((function(e){return $t(e)[0]}))).then((function(t){e=t}))}),(function(){}));return Promise.resolve(r&&r.then?r.then(t):t())}catch(e){return Promise.reject(e)}},r.deactivate=function(){window.ethereum&&window.ethereum.removeListener&&(window.ethereum.removeListener("chainChanged",this.handleChainChanged),window.ethereum.removeListener("accountsChanged",this.handleAccountsChanged),window.ethereum.removeListener("close",this.handleClose),window.ethereum.removeListener("networkChanged",this.handleNetworkChanged))},r.isAuthorized=function(){try{return window.ethereum?Promise.resolve(zt((function(){return Promise.resolve(window.ethereum.send("eth_accounts").then((function(e){return $t(e).length>0})))}),(function(){return!1}))):Promise.resolve(!1)}catch(e){return Promise.reject(e)}},t}(Nt);be=o("cFuyE"),ae=o("4yWCU"),s=o("aZikt");const Kt=new Gt({supportedChainIds:[1]});var Xt=o("eopQk"),Qt=(wt=o("g7X40"),o("3rE52")),Yt=(vt=o("hJDxl"),bt=o("epVy9"),s=o("aZikt"),pe=o("6oEu9"),o("jnTWi"));const er=({rowProps:e,onSelect:t=pe.NOOP})=>r(s).createElement(r(s).Fragment,null,e.map((e=>{var n;return r(s).createElement(Yt.BridgeTokenRow,Object.assign({key:null!==(n=e.address)&&void 0!==n?n:"native"},e,{onClick:()=>t(e.address)}))})));s=o("aZikt"),Fe=o("hHMPk"),kt=o("aADTv"),wt=o("g7X40");const tr=Fe.default.div`
  position: relative;
  background: #222222;
  border: 1px solid #323232;
  box-sizing: border-box;
  box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.3);
  border-radius: 8px;
  width: 400px;
  height: 450px;
  overflow: hidden;
`,rr=Fe.default.div`
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  height: 100%;
  padding: 20px;
`,nr=Fe.default.div`
  display: flex;
  flex-align: column;
  margin-bottom: 30px;
  height: 252px;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
`,ir=Fe.default.div`
  margin-bottom: 8px;
  margin-top: 25px;
`,or=Fe.default.ul`
  margin-top: 10px;
`,ar=({title:e,image:t,description:n,onClick:i,isButtonDisabled:o,buttonText:a,buttonTheme:c})=>r(s).createElement(rr,null,r(s).createElement(nr,null,t,r(s).createElement(ir,null,e),r(s).createElement(or,null,r(s).createElement(wt.Text,{size:16,color:"#999"},n))),r(s).createElement(kt.Button,{theme:c,onClick:i,disabled:o},a));var sr=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const cr="metmask_island_modal",ur=Fe.default.div`
  display: flex;
  margin-left: 12px;
`,lr=Fe.default.main`
  padding: 20px;
  height: 83%;
`;const dr=({onAssetSelect:e,assets:t,highlightedAsset:n,highlightedAssetStatus:i,isDisabled:o})=>{var a;const{activate:c,account:u,deactivate:l}=R(),{ethBalance:d,isRefreshingBalances:h}=de.useEthAssets(),[f,p]=s.useState(void 0),m=function(){const{activate:e,active:t}=R(),[r,n]=s.useState(!1);return s.useEffect((()=>{Kt.isAuthorized().then((t=>{try{t?e(Kt,void 0,!0).catch((()=>{n(!0)})):n(!0)}catch(e){console.error(e),n(!0)}}))}),[]),s.useEffect((()=>{!r&&t&&n(!0)}),[r,t]),r}(),g=()=>sr(void 0,void 0,void 0,(function*(){c(Kt,(e=>{p(function(e){return e instanceof Jt?"noProvider":e instanceof k?"wrongChainId":e instanceof Zt?"rejected":(console.error(e),"unknown")}(e))}))})),v=void 0===d||void 0===t||1===t.length||h,b=null!==(a=null==t?void 0:t.map((e=>{var t;const r=n&&n.address===e.address;return Object.assign(Object.assign({},e),{balance:null!==(t=e.balance)&&void 0!==t?t:0,isHighlighted:r,opacity:n&&!r?.3:void 0,status:r?i:void 0,isDisabled:o,spinnerColor:"#f5841f"})})))&&void 0!==a?a:[],y=!!window.ethereum;return r(s).createElement(tr,null,u&&r(s).createElement(r(s).Fragment,null,r(s).createElement(Qt.Header,{height:ae.BRIDGE_HEADER_HEIGHT,justifyContent:"flex-start"},r(s).createElement(vt.MetamaskIcon,{width:26,height:24}),r(s).createElement(ur,null,r(s).createElement(wt.Text,{color:"white",size:16},be.formatHashMedium(u)))),r(s).createElement(lr,null,r(s).createElement(Xt.FullHeightLoadingContent,{isLoading:!!v,spinnerColor:"#F5841F"},r(s).createElement(er,{rowProps:b,onSelect:r=>{const n=null==t?void 0:t.find((e=>e.address===r));n&&e(n)}})))),r(s).createElement(bt.PortalModal,{modalId:cr,isOpen:m&&!u||!y,animateOnFirstRender:!1,headerHeight:0},r(s).createElement(ar,{image:r(s).createElement(vt.MetamaskIcon,null),title:r(s).createElement(vt.MetamaskTextIcon,null),description:"Connect MetaMask to move tokens between Ethereum and Solana",buttonText:y?"Connect MetaMask":"MetaMask not detected",onClick:()=>{f||u||g(),!f&&u&&l()},isButtonDisabled:!y,buttonTheme:"metamask"})),r(s).createElement("div",{id:cr}))};s=o("aZikt"),Fe=o("hHMPk"),lt=o("7zHiM"),ae=o("4yWCU");var hr=o("9AO5f"),fr=(Xt=o("eopQk"),s=o("aZikt"),Fe=o("hHMPk"),o("aRGO0")),pr=(Oe=o("82Ilk"),o("6xszE")),mr=(vt=o("hJDxl"),o("hoJun"));const gr=Fe.default(fr.MenuList)`
  background: #000000;
  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
  border-radius: 6px;
  padding: 10px 17px;
  margin-top: 4px;
  width: 250px;
`,vr=Fe.default.div`
  overflow: scroll;
  max-height: ${e=>e.maxHeight};
`,br=Fe.default(fr.MenuItem)`
  font-size: 16px;
  padding: 7px 0px;
  display: flex;
  justify-content: space-between;
  &[data-selected] {
    background: inherit;
    color: #666;
    p {
      color: #666;
    }
  }
`,yr=()=>{const{accountMetas:e,setSelectedAccountIndex:t,selectedAccountIndex:n}=Oe.useAccounts();return r(s).createElement(fr.Menu,null,(({isExpanded:i})=>r(s).createElement(r(s).Fragment,null,r(s).createElement(fr.MenuButton,{as:"span"},r(s).createElement(mr.ChevronCircle,{$isExpanded:i,top:1},r(s).createElement(vt.DownChevronIcon,null))),r(s).createElement(gr,null,r(s).createElement(vr,{maxHeight:"330px"},e.map(((e,i)=>r(s).createElement(br,{key:e.publicKey,onSelect:()=>t(i)},r(s).createElement(pr.Address,{hoverColor:"#666"},e.publicKey),i===n&&r(s).createElement(vt.CheckmarkIcon,{width:11})))))))))};vt=o("hJDxl");const wr=Fe.default.div`
  padding: 20px;
  height: 83%;
`,Er=({onAssetSelect:e,assets:t,highlightedAsset:n,highlightedAssetStatus:i,hideAccountsDropdown:o,isDisabled:a})=>{var c;const u=lt.useFetchAssetsWithBalance(),l=null!==(c=null==t?void 0:t.map((e=>{var t;const r=n&&n.address===e.address;return Object.assign(Object.assign({},e),{balance:null!==(t=e.balance)&&void 0!==t?t:0,isHighlighted:r,opacity:n&&!r||null===n?.3:void 0,status:r?i:void 0,isDisabled:a})})))&&void 0!==c?c:[];return r(s).createElement(tr,null,r(s).createElement(hr.AccountHeader,{firstChild:r(s).createElement(vt.Logo,{width:28,height:28}),lastChild:o?r(s).createElement("div",null):r(s).createElement(yr,null),height:ae.BRIDGE_HEADER_HEIGHT,leftAlignAddress:!0}),r(s).createElement(wr,null,r(s).createElement(Xt.FullHeightLoadingContent,{isLoading:!u.isFetched},r(s).createElement(er,{rowProps:l,onSelect:r=>{const n=null==t?void 0:t.find((e=>e.address===r));n&&e(n)}}))),r(s).createElement("div",{id:"phantom_island_modal"}))};var _r,xr,Sr=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(a,s)}c((n=n.apply(e,t||[])).next())}))};(xr=_r||(_r={})).EthereumAssetSymbol="ethereumAssetSymbol",xr.SolanaAssetSymbol="solanaAssetSymbol";const Cr=Fe.default.main`
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
`,kr=Fe.default.div`
  display: flex;
  flex-direction: row;
  justify-content: center;
`,Ar=Fe.default.div`
  width: 140px;
  display: flex;
  align-items: center;
  justify-content: center;
  svg {
    fill: #818593;
  }
`,Or={FeGn77dhg1KXRRFeSwwMiykZnZPw5JXW6naf2aQgZDQf:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2","9w97GdWUYYaamGwdKMKZgGzPduZJkiFizq4rz5CPXRv2":"0xdAC17F958D2ee523a2206206994597C13D831ec7",FVsXUnbhifqJ4LiXQEbpUtXVdB8T5ADLKqSs5t1oc54F:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},Mr=r(Be)(Or),Pr=()=>{var e,t,n,i,o,a;const[c,u]=s.useState(void 0),[l,d]=s.useState(void 0),[h,f]=s.useState(void 0),[p,m]=s.useState(void 0),[g,v]=s.useState(void 0),b=()=>{u(void 0),d(void 0),f(void 0)},{fromAsset:y,toAsset:w}=null!=c?c:{},E=ie.useConnection(),[_,x]=(e=>{const[t,r]=s.useState(void 0),{latestBlockNumber:n}=le();return[t&&n?Math.min(Math.max(n-t,0),e):void 0,e=>{n&&r(null!=e?e:n)}]})(14),[S,C]=dt.useSolConfirmations(E,32),k=null===(e=lt.useFetchSolanaPrice().data)||void 0===e?void 0:e.usd,A=lt.useFetchSolanaBalance(),O=lt.useFetchAssetsWithMeta(),M=O.data,{assets:P,ethPrice:j,gasPrice:T,refreshEthBalances:I}=de.useEthAssets(),{accountClient:D,accountMeta:N}=Oe.useSelectedAccount(),W=N.type===me.AccountType.Ledger,{account:B,library:F}=R(),L=null!==(t=null==M?void 0:M.reduce(((e,t)=>(t.address&&Or[t.address]&&e.push(t),e)),[]))&&void 0!==t?t:[],q=null!=P?P:[];gt.useEffectOnce((()=>{if(!F)return;Sr(void 0,void 0,void 0,(function*(){const e=yield st.fetchPendingTransferInfo(E,F,L);if(!e)return;const{parsedVaa:t,fromAsset:r,uiAmount:n}=e;if(!r)return;const i=Rr(r,q);m({vaa:t,asset:i,uiAmount:n})}))}),0!==L.length&&0!==q.length&&void 0===p&&void 0===g&&!!F),gt.useEffectOnce((()=>{const e=new URLSearchParams(window.location.search);if(e.get(_r.EthereumAssetSymbol)){const e=q.find((e=>"ether"===e.isNativeOfType));if(!e)return;const t=Rr(e,L);if(!t)return;return void u({fromAsset:e,toAsset:t})}if(e.get(_r.SolanaAssetSymbol)){const e=L.find((e=>"sol"===e.isNativeOfType));if(!e)return;const t=Rr(e,q);if(!t)return;u({fromAsset:e,toAsset:t})}}),L.length>0&&q.length>1&&void 0===c);const U=(e,t)=>Sr(void 0,void 0,void 0,(function*(){const{fromAsset:r,toAsset:n}=t;if(!(F&&B&&r&&n))return;if(n.chain!==me.Chain.Solana||r.chain!==me.Chain.Ethereum)throw new Error("Cannot bridge incompatible assets");d({toChain:me.Chain.Solana,index:pt.TokenApproval,status:"loading",data:void 0});const i=be.uiAmountToAmount(e,r.decimals);try{if("ether"!==r.isNativeOfType){(yield st.bridgeHasApproval(F,B,r.address,i.toString()))||(yield st.maxApproveBridge(F,r.address,{gasPrice:null==T?void 0:T.toString()}),te.analytics.capture("bridgeToSolanaTokenApprovalSuccess"))}}catch(e){return console.error(e),te.analytics.capture("bridgeToSolanaTokenApprovalFailure"),void d({toChain:me.Chain.Solana,index:pt.TokenApproval,status:"failure",data:void 0})}if(d({toChain:me.Chain.Solana,index:pt.LockUp,status:"loading",data:void 0}),n.isNativeOfType)throw new Error("Bridging Ethereum assets to SOL not supported");let o,a,s,c;try{const e=new at.PublicKey(n.address);if(s=yield D.findAssociatedTokenAccountAsync(e),!s){const[t,r]=yield D.createAssociatedTokenAccountAsync(e,W);s=r}a="ether"!==r.isNativeOfType?yield st.lockAssetsInBridge(F,r.address,i,s,{gasPrice:null==T?void 0:T.toString()}):yield st.lockEthInBridge(F,i,s,{gasPrice:null==T?void 0:T.toString()}),o=yield a.wait(1),te.analytics.capture("bridgeToSolanaLockUpSuccess")}catch(e){return console.error(e),te.analytics.capture("bridgeToSolanaLockUpFailure"),void d({toChain:me.Chain.Solana,index:pt.LockUp,status:"failure",data:void 0})}d({toChain:me.Chain.Solana,index:pt.AwaitConfirmations,status:"loading",data:void 0}),x(o.blockNumber);try{yield a.wait(10),c=ct.waitForAccountChange(E,s,18e4),yield a.wait(14),te.analytics.capture("bridgeToSolanaConfirmationsSuccess")}catch(e){console.error(e),te.analytics.capture("bridgeToSolanaConfirmationsFailure"),d({toChain:me.Chain.Solana,index:pt.AwaitConfirmations,status:"failure",data:void 0})}d({toChain:me.Chain.Solana,index:pt.AwaitTransfer,status:"loading",data:void 0});try{yield c,te.analytics.capture("bridgeToSolanaAwaitTransferSuccess",{asset:r,data:{uiAmount:e}})}catch(e){console.error(e),te.analytics.capture("bridgeToSolanaAwaitTransferFailure")}yield ut.delayAsync(5e3),O.refetch(),A.refetch(),d({toChain:me.Chain.Solana,index:pt.Done,status:"success",data:void 0})})),H=(e,t,r)=>Sr(void 0,void 0,void 0,(function*(){if(!F||!B)return;const{toAsset:n,fromAsset:i}=t;if(n.chain!==me.Chain.Ethereum||i.chain!==me.Chain.Solana)throw new Error("Cannot bridge incompatible assets");if(i.isNativeOfType)throw new Error("Bridging SOL not yet supported");if(n.isNativeOfType)throw new Error("Bridging token to ETH not yet supported");const o=i,a=n;let s=r;if(!s){s={toChain:me.Chain.Ethereum,index:mt.LockUp,status:"loading",data:void 0},d(s);const t=be.uiAmountToAmount(e,o.decimals),r=new at.PublicKey(o.address);try{const[e,n]=yield D.lockInWormhole(r,t,B,a.address,o.decimals,W);te.analytics.capture("bridgeToEthereumLockUpSuccess"),s={toChain:me.Chain.Ethereum,index:mt.AwaitConfirmations,status:"loading",data:[e,n]}}catch(e){return console.error(e),te.analytics.capture("bridgeToEthereumLockUpFailure"),void d({toChain:me.Chain.Ethereum,index:mt.LockUp,status:"failure",data:void 0})}}if(s.index===mt.AwaitConfirmations){d(Object.assign(Object.assign({},s),{status:"loading"}));const[e,t]=s.data;try{const r=yield D.waitForTransactionConfirmationAsync(e),{slot:n}=r.context,i=st.awaitVAA(E,t);yield C(n),te.analytics.capture("bridgeToEthereumConfirmationsSuccess"),s={toChain:me.Chain.Ethereum,index:mt.AwaitVaa,status:"loading",data:[i,t]}}catch(r){return console.error(r),te.analytics.capture("bridgeToEthereumConfirmationsFailure"),void d({toChain:me.Chain.Ethereum,index:mt.AwaitConfirmations,status:"failure",data:[e,t]})}}if(s.index===mt.AwaitVaa){d(Object.assign(Object.assign({},s),{status:"loading"}));const[e,t]=s.data;try{let t;try{t=yield e}catch(e){console.error(e)}t||(t=yield st.fetchPendingVaa(E,F,L)),te.analytics.capture("bridgeToEthereumAwaitVaaSuccess"),s={toChain:me.Chain.Ethereum,index:mt.ClaimAsset,status:"loading",data:t}}catch(e){return console.error(e),te.analytics.capture("bridgeToEthereumAwaitVaaFailure"),void d({toChain:me.Chain.Ethereum,index:mt.AwaitVaa,status:"failure",data:[st.awaitVAA(E,t,6e4),t]})}}if(s.index===mt.ClaimAsset){d(Object.assign(Object.assign({},s),{status:"loading"}));const t=s.data;try{yield st.executeVAA(F,t,{gasPrice:null==T?void 0:T.toString()}),yield ut.delayAsync(5e3),I(!1),te.analytics.capture("bridgeToEthereumClaimAssetSuccess",{asset:i,data:{uiAmount:e}}),d({toChain:me.Chain.Ethereum,index:mt.Done,status:"success",data:void 0})}catch(e){console.error(e),te.analytics.capture("bridgeToEthereumClaimAssetFailure"),d({toChain:me.Chain.Ethereum,index:mt.ClaimAsset,status:"failure",data:t})}}})),V=(null==y?void 0:y.chain)===me.Chain.Solana,z=(null==y?void 0:y.chain)===me.Chain.Ethereum,$=e=>T&&j?be.amountToUiAmount(T.multipliedBy(e),18)*j.usd:0,J=$(45e3),Z=$(65e3),G=$(215e3),K=k?.04*k:1.5,X=null==p?void 0:p.asset;return r(s).createElement(Cr,null,r(s).createElement(kr,null,r(s).createElement(Dt.MetamaskIsland,{assets:q,highlightedAsset:V?w:p?p.asset:void 0,highlightedAssetStatus:null!==(n=null==l?void 0:l.status)&&void 0!==n?n:g,isDisabled:void 0!==l||void 0!==g,onAssetSelect:e=>{const t=Rr(e,L);te.analytics.capture("bridgeSwapperOpen",{asset:e}),t&&u({fromAsset:e,toAsset:t})}}),r(s).createElement(Ar,null,void 0===(null==y?void 0:y.chain)?r(s).createElement(vt.DoubleArrowsIcon,null):V?r(s).createElement(vt.LeftArrowIcon,null):r(s).createElement(vt.RightArrowIcon,null)),r(s).createElement(Er,{assets:L,highlightedAsset:z?w:void 0!==p?null:void 0,highlightedAssetStatus:null==l?void 0:l.status,hideAccountsDropdown:void 0!==l,isDisabled:void 0!==l||void 0!==p,onAssetSelect:e=>{const t=Rr(e,q);te.analytics.capture("bridgeSwapperOpen",{asset:e}),t&&u({fromAsset:e,toAsset:t})}})),r(s).createElement(bt.PortalModal,{modalId:Dt.METAMASK_MODAL_ID,isOpen:z,animateOnFirstRender:!1,headerHeight:ae.BRIDGE_HEADER_HEIGHT},y&&w&&r(s).createElement(Et.BridgeSwapper,{fromAsset:y,toAsset:w,price:1,totalFees:y.isNativeOfType?be.formatDollarAmount(Z):be.formatDollarAmount(Z+J),bridgeStepInfos:[{name:"Approve token transfers",buttonText:"Waiting for approval..."},{name:"Lock tokens into wormhole",buttonText:"Waiting for approval..."},{name:`Wait for ${(null!==(i=null==l?void 0:l.index)&&void 0!==i?i:0)>pt.AwaitConfirmations?14:null!=_?_:0} / 14 confirmations`,buttonText:"Waiting for confirmations..."},{name:"Wait for SPL token transfer",buttonText:"Waiting for transfer..."}],onConvertClick:e=>{f(e),c&&U(e,c)},fromAssetAmount:h,topInputLabel:"From Metamask",bottomInputLabel:"To Phantom",onBackClick:()=>d(void 0),currentBridgeStep:l,onCancelClick:b,onBridgeRetry:()=>c&&h&&U(h,c),onClose:b,buttonTheme:"metamask",spinnerColor:"#f5841f",feeBreakdown:y.isNativeOfType?[{label:"Ethereum Network",value:be.formatDollarAmount(Z)}]:[{label:"One-time token approval",value:be.formatDollarAmount(J)},{label:"Ethereum Network",value:be.formatDollarAmount(Z)}]})),r(s).createElement(bt.PortalModal,{modalId:"phantom_island_modal",isOpen:V,animateOnFirstRender:!1,headerHeight:ae.BRIDGE_HEADER_HEIGHT},y&&w&&r(s).createElement(Et.BridgeSwapper,{fromAsset:y,toAsset:w,price:1,totalFees:be.formatDollarAmount(K+G),bridgeStepInfos:[{name:"Lock tokens into wormhole",buttonText:"Waiting for completion..."},{name:`Wait for ${(null!==(o=null==l?void 0:l.index)&&void 0!==o?o:0)>mt.AwaitConfirmations?32:null!=S?S:0} / 32 confirmations`,buttonText:"Waiting for confirmations..."},{name:"Wait for lock up proof",buttonText:"Waiting for proof..."},{name:`Claim ${null!==(a=w.symbol)&&void 0!==a?a:"asset"} on Ethereum`,buttonText:"Waiting for approval..."}],onConvertClick:e=>{f(e),c&&H(e,c)},fromAssetAmount:h,topInputLabel:"From Phantom",bottomInputLabel:"To Metamask",onBackClick:()=>d(void 0),currentBridgeStep:l,onBridgeRetry:()=>{h&&c&&l&&l.toChain===me.Chain.Ethereum&&H(h,c,l)},onClose:b,onCancelClick:b,feeBreakdown:[{label:"Solana Network",value:be.formatDollarAmount(K)},{label:"Ethereum Network",value:be.formatDollarAmount(G)}]})),r(s).createElement(bt.PortalModal,{modalId:Dt.METAMASK_MODAL_ID,isOpen:!!p&&!g,animateOnFirstRender:!1,headerHeight:0},p&&r(s).createElement(ar,{image:r(s).createElement(yt.TokenImage,{iconUrl:null==X?void 0:X.iconUrl,width:80,questionMarkWidth:80}),title:r(s).createElement(wt.Text,{color:"#FFF",size:30,weight:500},`Claim ${p.uiAmount} ${null==X?void 0:X.symbol}`," "),description:`You still have ${p.uiAmount} ${null==X?void 0:X.symbol} that didn’t finish converting over from Phantom`,buttonText:`Claim ${p.uiAmount} ${null==X?void 0:X.symbol}`,onClick:()=>{return e=p,Sr(void 0,void 0,void 0,(function*(){const{vaa:t,asset:r,uiAmount:n}=e;if(F)try{v("loading"),yield st.executeVAA(F,t,{gasPrice:null==T?void 0:T.toString()}),yield ut.delayAsync(5e3),I(!1),v("success"),te.analytics.capture("bridgeToEthereumReClaimAssetSuccess",{asset:r,data:{uiAmount:n}}),yield ut.delayAsync(5e3),m(void 0),v(void 0)}catch(e){console.error(e),v("failure"),te.analytics.capture("bridgeToEthereumReClaimAssetFailure"),yield ut.delayAsync(3e3),v(void 0)}}));var e},isButtonDisabled:!1,buttonTheme:"metamask"})))},Rr=(e,t)=>{if(e.chain===me.Chain.Solana){if(e.isNativeOfType)throw new Error("Bridging SOL to Ethereum is not supported");return t.find((t=>t.address===Or[e.address]))}if(e.chain===me.Chain.Ethereum){if(e.isNativeOfType)return t.find((e=>"FeGn77dhg1KXRRFeSwwMiykZnZPw5JXW6naf2aQgZDQf"===e.address));return t.find((t=>t.address===Mr[e.address]))}};ee.initSentry();const jr=e=>new Y.Web3Provider(e),Tr=()=>{const e=s.useCallback((e=>r(s).createElement(Pe.ModalsProvider,null,r(s).createElement(Me.WalletMenuProvider,null,r(s).createElement(De.Unlock,{isFullScreen:!0,unlockSeedAndMnemonic:e})))),[]),t=s.useCallback((()=>{re.openTabAsync({url:"onboarding.html"}),window.close()}),[]);return r(s).createElement(Ie.SentryErrorBoundary,null,r(s).createElement(ne.ThemedGlobalStyle,{backgroundColor:"#2C2D30"}),r(s).createElement(Te.BannerProvider,null,r(s).createElement(je.QueryProvider,null,r(s).createElement(Ne.FullPageHeader,null),r(s).createElement(Re.FeatureFlagsProvider,null,r(s).createElement(P,{getLibrary:jr},r(s).createElement(oe.SeedProvider,{renderLocked:e,openOnboarding:t},r(s).createElement(ie.ConnectionProvider,null,r(s).createElement(ue,null,r(s).createElement(de.EthAssetsProvider,null,r(s).createElement(Oe.AccountsProvider,null,r(s).createElement(We.BridgeFlow,null)))))))))))},Ir=r(j)();window.ethereum=Ir,Ir.on("error",(()=>{window.ethereum=null})),te.analytics.capture("bridgeOpen"),c.render(r(s).createElement(Tr,null),document.getElementById("root"));