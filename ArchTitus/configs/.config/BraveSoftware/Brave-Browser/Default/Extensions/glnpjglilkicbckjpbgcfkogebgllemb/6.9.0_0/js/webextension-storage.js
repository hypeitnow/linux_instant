Okta.Storage=function(r,t){var a=Okta.Q;var e=Okta._okta;var n=e.each;var o=e.keys;var s=Okta.fn.storage.wrapVal;var g=Okta.fn.storage.unwrapVal;var i={setPersistentState:t.set,getPersistentState:t.get,setSessionState:function(t,e){r.set(t,s(e));return a(e)},getSessionState:function(t){return a(g(r.get(t)))}};var u=Okta.StorageBase(i,Okta.Constants.Storage);u.getStorageUsage=function(){return t.getAll().then(function(e){try{var r=0;var t=o(e);n(t,function(t){r+=t.length;r+=JSON.stringify(e[t]).length});return r}catch(t){Log.error("WebExtension::getLocalStorageUsage Error: {0}",t);return a.reject(t)}})};return u};